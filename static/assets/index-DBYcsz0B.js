import{h as j,r as g,aq as v,i as F,x as l,t,y as C,b3 as z,b4 as H,aN as O,aP as J,aM as Q,be as X,p,q as Z,bw as $,C as ee,ax as le,ay as ae,aV as te,N as c,as as oe,A as re,H as W,aD as se,aE as ie,au as ne,E as q,j as u}from"./vendor-BxNawP4f.js";import{_ as ue}from"./index-DyxCg8e9.js";const me={class:"system-settings"},de=["src"],pe={class:"actions"},fe=j({__name:"index",setup(ce){const b=g("basic"),N=g(),n=v({systemName:"",companyName:"",contactPhone:"",contactEmail:"",logo:""}),R={systemName:[{required:!0,message:"请输入系统名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],companyName:[{required:!0,message:"请输入公司名称",trigger:"blur"}],contactPhone:[{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],contactEmail:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}]},E=g(),m=v({defaultWeightUnit:"KG",defaultDimUnit:"CM",defaultCurrency:"CNY",dimFactor:139,minChargeWeight:.5}),S={defaultWeightUnit:[{required:!0,message:"请选择默认重量单位",trigger:"change"}],defaultDimUnit:[{required:!0,message:"请选择默认尺寸单位",trigger:"change"}],defaultCurrency:[{required:!0,message:"请选择默认货币",trigger:"change"}],dimFactor:[{required:!0,message:"请输入体积重系数",trigger:"blur"}],minChargeWeight:[{required:!0,message:"请输入最小计费重量",trigger:"blur"}]},P=g(),r=v({emailNotification:!1,smtpServer:"",smtpPort:587,senderEmail:"",emailPassword:""}),A={smtpServer:[{required:!0,message:"请输入SMTP服务器地址",trigger:"blur"}],smtpPort:[{required:!0,message:"请输入SMTP端口",trigger:"blur"}],senderEmail:[{required:!0,message:"请输入发件人邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],emailPassword:[{required:!0,message:"请输入邮箱密码",trigger:"blur"}]},k=g(),i=v({apiAccessControl:!1,apiKey:"",ipWhitelist:[],rateLimit:60}),I={apiKey:[{required:!0,message:"请生成API密钥",trigger:"blur"}],rateLimit:[{required:!0,message:"请设置请求频率限制",trigger:"blur"}]},M=d=>{n.logo=d.url},L=d=>{const e=d.type.startsWith("image/"),s=d.size/1024/1024<2;return e?s?!0:(q.error("上传图片大小不能超过 2MB!"),!1):(q.error("上传文件只能是图片格式!"),!1)},K=()=>{const d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let s=0;s<32;s++)e+=d.charAt(Math.floor(Math.random()*d.length));i.apiKey=e},h=async()=>{const e={basic:N,calculation:E,notification:P,api:k}[b.value];if(e!=null&&e.value)try{await e.value.validate(),q.success("保存成功")}catch(s){console.error("表单验证失败:",s)}},B=()=>{const e={basic:N,calculation:E,notification:P,api:k}[b.value];e!=null&&e.value&&e.value.resetFields()};return(d,e)=>{const s=Q,o=J,D=ee,T=X,V=O,_=H,f=ae,y=le,U=te,x=oe,w=re,G=z,Y=ne;return u(),F("div",me,[l(Y,null,{header:t(()=>e[19]||(e[19]=[C("div",{class:"card-header"},[C("h2",null,"系统设置")],-1)])),default:t(()=>[l(G,{modelValue:b.value,"onUpdate:modelValue":e[18]||(e[18]=a=>b.value=a)},{default:t(()=>[l(_,{label:"基本设置",name:"basic"},{default:t(()=>[l(V,{ref_key:"basicFormRef",ref:N,model:n,rules:R,"label-width":"120px"},{default:t(()=>[l(o,{label:"系统名称",prop:"systemName"},{default:t(()=>[l(s,{modelValue:n.systemName,"onUpdate:modelValue":e[0]||(e[0]=a=>n.systemName=a)},null,8,["modelValue"])]),_:1}),l(o,{label:"公司名称",prop:"companyName"},{default:t(()=>[l(s,{modelValue:n.companyName,"onUpdate:modelValue":e[1]||(e[1]=a=>n.companyName=a)},null,8,["modelValue"])]),_:1}),l(o,{label:"联系电话",prop:"contactPhone"},{default:t(()=>[l(s,{modelValue:n.contactPhone,"onUpdate:modelValue":e[2]||(e[2]=a=>n.contactPhone=a)},null,8,["modelValue"])]),_:1}),l(o,{label:"联系邮箱",prop:"contactEmail"},{default:t(()=>[l(s,{modelValue:n.contactEmail,"onUpdate:modelValue":e[3]||(e[3]=a=>n.contactEmail=a)},null,8,["modelValue"])]),_:1}),l(o,{label:"系统Logo",prop:"logo"},{default:t(()=>[l(T,{class:"avatar-uploader",action:"/api/system/upload","show-file-list":!1,"on-success":M,"before-upload":L},{default:t(()=>[n.logo?(u(),F("img",{key:0,src:n.logo,class:"avatar"},null,8,de)):(u(),p(D,{key:1,class:"avatar-uploader-icon"},{default:t(()=>[l(Z($))]),_:1}))]),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),l(_,{label:"计算设置",name:"calculation"},{default:t(()=>[l(V,{ref_key:"calcFormRef",ref:E,model:m,rules:S,"label-width":"120px"},{default:t(()=>[l(o,{label:"默认重量单位",prop:"defaultWeightUnit"},{default:t(()=>[l(y,{modelValue:m.defaultWeightUnit,"onUpdate:modelValue":e[4]||(e[4]=a=>m.defaultWeightUnit=a)},{default:t(()=>[l(f,{label:"千克(KG)",value:"KG"}),l(f,{label:"磅(LB)",value:"LB"})]),_:1},8,["modelValue"])]),_:1}),l(o,{label:"默认尺寸单位",prop:"defaultDimUnit"},{default:t(()=>[l(y,{modelValue:m.defaultDimUnit,"onUpdate:modelValue":e[5]||(e[5]=a=>m.defaultDimUnit=a)},{default:t(()=>[l(f,{label:"厘米(CM)",value:"CM"}),l(f,{label:"英寸(IN)",value:"IN"})]),_:1},8,["modelValue"])]),_:1}),l(o,{label:"默认货币",prop:"defaultCurrency"},{default:t(()=>[l(y,{modelValue:m.defaultCurrency,"onUpdate:modelValue":e[6]||(e[6]=a=>m.defaultCurrency=a)},{default:t(()=>[l(f,{label:"人民币(CNY)",value:"CNY"}),l(f,{label:"美元(USD)",value:"USD"})]),_:1},8,["modelValue"])]),_:1}),l(o,{label:"体积重系数",prop:"dimFactor"},{default:t(()=>[l(U,{modelValue:m.dimFactor,"onUpdate:modelValue":e[7]||(e[7]=a=>m.dimFactor=a),min:1,precision:2,step:.01},null,8,["modelValue"])]),_:1}),l(o,{label:"最小计费重量",prop:"minChargeWeight"},{default:t(()=>[l(U,{modelValue:m.minChargeWeight,"onUpdate:modelValue":e[8]||(e[8]=a=>m.minChargeWeight=a),min:.01,precision:2,step:.01},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),l(_,{label:"通知设置",name:"notification"},{default:t(()=>[l(V,{ref_key:"notifyFormRef",ref:P,model:r,rules:A,"label-width":"120px"},{default:t(()=>[l(o,{label:"邮件通知",prop:"emailNotification"},{default:t(()=>[l(x,{modelValue:r.emailNotification,"onUpdate:modelValue":e[9]||(e[9]=a=>r.emailNotification=a)},null,8,["modelValue"])]),_:1}),r.emailNotification?(u(),p(o,{key:0,label:"SMTP服务器",prop:"smtpServer"},{default:t(()=>[l(s,{modelValue:r.smtpServer,"onUpdate:modelValue":e[10]||(e[10]=a=>r.smtpServer=a)},null,8,["modelValue"])]),_:1})):c("",!0),r.emailNotification?(u(),p(o,{key:1,label:"SMTP端口",prop:"smtpPort"},{default:t(()=>[l(U,{modelValue:r.smtpPort,"onUpdate:modelValue":e[11]||(e[11]=a=>r.smtpPort=a),min:1,max:65535},null,8,["modelValue"])]),_:1})):c("",!0),r.emailNotification?(u(),p(o,{key:2,label:"发件人邮箱",prop:"senderEmail"},{default:t(()=>[l(s,{modelValue:r.senderEmail,"onUpdate:modelValue":e[12]||(e[12]=a=>r.senderEmail=a)},null,8,["modelValue"])]),_:1})):c("",!0),r.emailNotification?(u(),p(o,{key:3,label:"邮箱密码",prop:"emailPassword"},{default:t(()=>[l(s,{modelValue:r.emailPassword,"onUpdate:modelValue":e[13]||(e[13]=a=>r.emailPassword=a),type:"password","show-password":""},null,8,["modelValue"])]),_:1})):c("",!0)]),_:1},8,["model"])]),_:1}),l(_,{label:"API设置",name:"api"},{default:t(()=>[l(V,{ref_key:"apiFormRef",ref:k,model:i,rules:I,"label-width":"120px"},{default:t(()=>[l(o,{label:"API访问控制",prop:"apiAccessControl"},{default:t(()=>[l(x,{modelValue:i.apiAccessControl,"onUpdate:modelValue":e[14]||(e[14]=a=>i.apiAccessControl=a)},null,8,["modelValue"])]),_:1}),i.apiAccessControl?(u(),p(o,{key:0,label:"API密钥",prop:"apiKey"},{default:t(()=>[l(s,{modelValue:i.apiKey,"onUpdate:modelValue":e[15]||(e[15]=a=>i.apiKey=a),readonly:""},{append:t(()=>[l(w,{onClick:K},{default:t(()=>e[20]||(e[20]=[W("重新生成")])),_:1})]),_:1},8,["modelValue"])]),_:1})):c("",!0),i.apiAccessControl?(u(),p(o,{key:1,label:"IP白名单",prop:"ipWhitelist"},{default:t(()=>[l(y,{modelValue:i.ipWhitelist,"onUpdate:modelValue":e[16]||(e[16]=a=>i.ipWhitelist=a),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请输入IP地址，回车确认"},{default:t(()=>[(u(!0),F(se,null,ie(i.ipWhitelist,a=>(u(),p(f,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):c("",!0),i.apiAccessControl?(u(),p(o,{key:2,label:"请求频率限制",prop:"rateLimit"},{default:t(()=>[l(U,{modelValue:i.rateLimit,"onUpdate:modelValue":e[17]||(e[17]=a=>i.rateLimit=a),min:1,step:10},null,8,["modelValue"]),e[21]||(e[21]=C("span",{class:"ml-2"},"次/分钟",-1))]),_:1})):c("",!0)]),_:1},8,["model"])]),_:1})]),_:1},8,["modelValue"]),C("div",pe,[l(w,{type:"primary",onClick:h},{default:t(()=>e[22]||(e[22]=[W("保存设置")])),_:1}),l(w,{onClick:B},{default:t(()=>e[23]||(e[23]=[W("重置")])),_:1})])]),_:1})])}}}),Ve=ue(fe,[["__scopeId","data-v-0d7253e8"]]);export{Ve as default};
