import{h as F,r as f,w as _,i as h,l as C,x as V,N as k,aM as N,b7 as T,aO as H,t as g,p as $,A as D,H as S,L as z,C as K,q as P,bh as L,bl as R,y as U,aD as j,aE as A,j as i,k as O}from"./vendor-BxNawP4f.js";import{_ as G}from"./index-DyxCg8e9.js";/* empty css                                                                        */const J={class:"search-input__suggestions-list"},Q=["onClick","onMouseenter"],W=F({__name:"SearchInput",props:{modelValue:{default:""},placeholder:{default:"请输入搜索内容"},size:{default:"default"},disabled:{type:Boolean,default:!1},clearable:{type:Boolean,default:!0},showSearchButton:{type:Boolean,default:!1},searchButtonText:{default:"搜索"},suggestions:{default:()=>[]},suggestionsMaxHeight:{default:"300px"},inputProps:{default:()=>({})}},emits:["update:modelValue","search","select","clear"],setup(l,{expose:r,emit:s}){const t=l,n=s,d=f(),o=f(t.modelValue),u=f(!1),c=f(-1);_(()=>t.modelValue,e=>{o.value=e}),_(o,e=>{n("update:modelValue",e)});const a=()=>{u.value=!0},m=()=>{setTimeout(()=>{u.value=!1,c.value=-1},200)},v=()=>{o.value="",n("clear")},y=()=>{n("search",o.value),u.value=!1},I=e=>{o.value=typeof e=="string"?e:e.value,n("select",e),u.value=!1};return r({focus:()=>{var e;return(e=d.value)==null?void 0:e.focus()},blur:()=>{var e;return(e=d.value)==null?void 0:e.blur()},select:()=>{var e;return(e=d.value)==null?void 0:e.select()}}),(e,B)=>{const w=K,q=D,E=N;return i(),h("div",{class:C(["search-input",{"is-focused":u.value}])},[V(E,T({ref_key:"inputRef",ref:d,modelValue:o.value,"onUpdate:modelValue":B[0]||(B[0]=p=>o.value=p)},e.inputProps,{placeholder:e.placeholder,size:e.size,disabled:e.disabled,clearable:e.clearable,onFocus:a,onBlur:m,onClear:v,onKeyup:H(y,["enter"])}),{prefix:g(()=>[V(w,{class:"search-input__icon"},{default:g(()=>[V(P(L))]),_:1})]),suffix:g(()=>[e.showSearchButton?(i(),$(q,{key:0,size:e.size,type:"primary",disabled:e.disabled,onClick:y},{default:g(()=>[S(z(e.searchButtonText),1)]),_:1},8,["size","disabled"])):k("",!0)]),_:1},16,["modelValue","placeholder","size","disabled","clearable"]),e.suggestions.length&&u.value?(i(),h("div",{key:0,class:"search-input__suggestions",style:R({maxHeight:e.suggestionsMaxHeight})},[U("ul",J,[(i(!0),h(j,null,A(e.suggestions,(p,b)=>(i(),h("li",{key:b,class:C(["search-input__suggestion-item",{"is-selected":b===c.value}]),onClick:M=>I(p),onMouseenter:M=>c.value=b},[O(e.$slots,"suggestion",{item:p},()=>[S(z(p),1)])],42,Q))),128))])],4)):k("",!0)],2)}}}),X=(l,r="auto")=>{if(!l.trim())return{valid:!1,message:"邮政编码不能为空"};if(r==="auto"){const s=/^\d{5}(-\d{4})?$/,t=/^\d{6}$/;return s.test(l)||t.test(l)?{valid:!0}:{valid:!1,message:"邮政编码格式不正确"}}return r==="us"?/^\d{5}(-\d{4})?$/.test(l)?{valid:!0}:{valid:!1,message:"美国邮政编码格式应为5位数字或5位数字-4位数字"}:r==="cn"?/^\d{6}$/.test(l)?{valid:!0}:{valid:!1,message:"中国邮政编码应为6位数字"}:{valid:!1,message:"邮政编码格式不正确"}},Y=F({__name:"PostalCodeInput",props:{modelValue:{},name:{default:"postalCode"},placeholder:{default:"输入邮政编码"},label:{default:""},disabled:{type:Boolean,default:!1},required:{type:Boolean,default:!0},format:{default:"auto"}},emits:["update:modelValue","change","search","address-change"],setup(l,{emit:r}){const s=l,t=r,n=f(s.modelValue);_(()=>s.modelValue,a=>{n.value=a});const d=a=>X(a,s.format),o=a=>{t("update:modelValue",a),t("change",a)},u=a=>{a||t("address-change",null)},c=a=>{t("search",a)};return(a,m)=>(i(),$(P(W),{modelValue:n.value,"onUpdate:modelValue":m[0]||(m[0]=v=>n.value=v),name:a.name,placeholder:a.placeholder,label:a.label,disabled:a.disabled,required:a.required,validator:d,"search-on-valid":!0,"min-search-length":5,onChange:o,onSearch:c,onValid:u},null,8,["modelValue","name","placeholder","label","disabled","required"]))}}),ae=G(Y,[["__scopeId","data-v-fbaafa5b"]]);export{ae as P};
