import{h as P,a as M,i as S,x as e,au as H,t,k as G,N as T,aL as Fe,y as u,aD as K,aE as ae,aF as le,aG as oe,aJ as _e,H as h,L as c,q as U,az as Ve,j as w,aq as ee,r as k,w as X,p as B,aN as se,aP as ne,aV as re,aW as fe,C as he,aX as te,aH as ue,aI as ie,A as ce,a0 as xe,aY as Ie,E as W,aZ as Se,a_ as ke,a$ as Ee,o as Ue,b0 as ze,b1 as Ne,aa as Te,av as We,b2 as Ze,b3 as je,b4 as De,at as Re,aw as Be,ax as Oe,aM as Le,b5 as Me,b6 as Pe,ay as Ae}from"./vendor-BxNawP4f.js";import{_ as A}from"./index-DyxCg8e9.js";/* empty css                                                                        *//* empty css                                                                      */import{f as Ye}from"./index-DdmqVHKO.js";const qe={class:"batch-calculator"},He={class:"card-header"},Je={class:"card-title"},Ge={class:"card-actions"},Ke={key:0,class:"validation-errors"},Xe={class:"error-list"},Qe={key:1,class:"result-content"},et={class:"flex gap-base"},tt={class:"text-success"},at={class:"text-danger"},lt=P({__name:"BatchCalculator",props:{title:{},result:{},validationErrors:{}},setup(Z){const n=Z,b=M(()=>n.result?Math.round(n.result.processed_records/n.result.total_records*100):0),d=M(()=>n.result?n.result.status==="completed"?"success":n.result.status==="failed"?"exception":"warning":""),v=l=>{switch(l){case"completed":return"success";case"failed":return"danger";case"processing":return"warning";default:return"info"}},a=l=>{switch(l){case"completed":return"已完成";case"failed":return"失败";case"processing":return"处理中";case"pending":return"等待处理";default:return"未知状态"}};return(l,I)=>{const $=Fe,V=_e,_=oe,f=Ve,C=le,x=H;return w(),S("div",qe,[e(x,null,{header:t(()=>[u("div",He,[u("h3",Je,c(l.title),1),u("div",Ge,[G(l.$slots,"actions",{},void 0,!0)])])]),default:t(()=>{var F;return[G(l.$slots,"upload-area",{},void 0,!0),(F=l.validationErrors)!=null&&F.length?(w(),S("div",Ke,[e($,{title:"数据验证失败",type:"error",closable:!1,"show-icon":""},{default:t(()=>[u("ul",Xe,[(w(!0),S(K,null,ae(l.validationErrors,z=>(w(),S("li",{key:z.row}," 第 "+c(z.row)+" 行: "+c(z.message),1))),128))])]),_:1})])):T("",!0),G(l.$slots,"preview",{},void 0,!0),l.result?(w(),S("div",Qe,[e(C,{column:2,border:""},{default:t(()=>[e(_,{label:"任务状态"},{default:t(()=>[e(V,{type:v(l.result.status)},{default:t(()=>[h(c(a(l.result.status)),1)]),_:1},8,["type"])]),_:1}),e(_,{label:"创建时间"},{default:t(()=>[h(c(U(Ye)(l.result.created_at)),1)]),_:1}),e(_,{label:"文件名称"},{default:t(()=>[h(c(l.result.file_name),1)]),_:1}),e(_,{label:"总记录数"},{default:t(()=>[h(c(l.result.total_records),1)]),_:1}),e(_,{label:"处理进度"},{default:t(()=>[e(f,{percentage:b.value,status:d.value},null,8,["percentage","status"])]),_:1}),e(_,{label:"处理结果"},{default:t(()=>[u("div",et,[u("span",tt,"成功: "+c(l.result.success_records),1),u("span",at,"失败: "+c(l.result.failed_records),1)])]),_:1})]),_:1}),G(l.$slots,"result-details",{},void 0,!0)])):T("",!0)]}),_:3})])}}}),ot=A(lt,[["__scopeId","data-v-da2d5ccb"]]),st={class:"base-fee-calculator"},nt={class:"card-header"},rt={class:"card-actions"},ut={class:"flex gap-base items-center"},Y="KG",it="CM",q="CNY",ct=P({__name:"BaseFeeCalculator",props:{weightUnit:{default:"KG"},dimensionUnit:{default:"CM"},dimFactor:{default:5e3},minWeight:{default:.1},maxWeight:{default:999999},minDimension:{default:0},maxDimension:{default:999999},productId:{default:""},zone:{default:""}},emits:["calculate","reset"],setup(Z,{expose:n,emit:b}){const d=Z,v=b,a=ee({actualWeight:0,length:0,width:0,height:0,weightUnit:d.weightUnit,dimensionUnit:d.dimensionUnit}),l=k([]),I=k(null),$=M(()=>{const{length:m,width:o,height:p}=a;if(!m||!o||!p)return 0;const i=a.dimensionUnit==="IN"?2.54:1;return m*o*p*Math.pow(i,3)/d.dimFactor}),V=M(()=>{const m=a.weightUnit==="LB"?a.actualWeight*.453592:a.actualWeight;return Math.max(m,$.value)}),_=k(0),f=async()=>{try{const m=await fetch(`/api/products/${d.productId}/weight-bands?zone=${d.zone}`);l.value=await m.json()}catch(m){console.error("获取重量分段数据失败:",m)}},C=()=>{if(!a.actualWeight||a.actualWeight<d.minWeight)return W.error(`实际重量必须大于${d.minWeight}${a.weightUnit}`),!1;if(a.actualWeight>d.maxWeight)return W.error(`实际重量不能超过${d.maxWeight}${a.weightUnit}`),!1;const m=[a.length,a.width,a.height];return m.some(o=>!o||o<d.minDimension)?(W.error(`尺寸必须大于${d.minDimension}${a.dimensionUnit}`),!1):m.some(o=>o>d.maxDimension)?(W.error(`尺寸不能超过${d.maxDimension}${a.dimensionUnit}`),!1):!0},x=async()=>{if(C())try{const m=V.value,o=l.value.find(i=>m>=i.start&&m<=i.end);if(!o){W.error("未找到匹配的重量段");return}const p=o.type==="per_kg"?m*o.price:o.price;_.value=p,I.value={steps:[{description:"计算体积重",formula:`${a.length} × ${a.width} × ${a.height} ÷ ${d.dimFactor} = ${$.value.toFixed(2)}${Y}`},{description:"确定计费重量",formula:`max(${a.actualWeight}, ${$.value.toFixed(2)}) = ${V.value.toFixed(2)}${Y}`},{description:"计算基础运费",formula:o.type==="per_kg"?`${V.value.toFixed(2)} × ${o.price} = ${p.toFixed(2)}${q}`:`${o.price}${q} (固定费率)`}],total:p},v("calculate",{requestId:Date.now().toString(),baseCharge:p,fuelSurcharge:0,insuranceFee:0,totalCharge:p,currency:q,estimatedDays:0,details:{weightCharge:p,distanceCharge:0,zoneCharge:0,additionalCharges:[]}})}catch(m){console.error("计算失败:",m),W.error("计算失败，请重试")}},F=()=>{Object.assign(a,{actualWeight:0,length:0,width:0,height:0,weightUnit:d.weightUnit,dimensionUnit:d.dimensionUnit}),I.value=null,_.value=0,v("reset")},z=m=>`${m.toFixed(2)} ${q}`;return X(()=>[d.productId,d.zone],async([m,o])=>{m&&o&&(await f(),await x())},{immediate:!0}),n({reset:F,calculate:x,form:a}),(m,o)=>{const p=he,i=ce,r=re,s=ne,D=fe,R=se,E=ie,j=ue,N=H;return w(),S("div",st,[e(N,null,{header:t(()=>[u("div",nt,[o[9]||(o[9]=u("h3",{class:"card-title"},"基础运费计算",-1)),u("div",rt,[e(i,{type:"primary",onClick:x},{default:t(()=>[e(p,null,{default:t(()=>[e(U(xe))]),_:1}),o[7]||(o[7]=h("计算 "))]),_:1}),e(i,{onClick:F},{default:t(()=>[e(p,null,{default:t(()=>[e(U(Ie))]),_:1}),o[8]||(o[8]=h("重置 "))]),_:1})])])]),default:t(()=>[e(R,{model:a,"label-width":"120px"},{default:t(()=>[e(s,{label:"实际重量",required:""},{default:t(()=>[e(r,{modelValue:a.actualWeight,"onUpdate:modelValue":o[0]||(o[0]=g=>a.actualWeight=g),min:0,precision:2,step:.1,"controls-position":"right"},null,8,["modelValue"]),u("span",{class:"text-secondary ml-base"},c(Y))]),_:1}),e(s,{label:"包裹尺寸",required:""},{default:t(()=>[u("div",ut,[e(r,{modelValue:a.length,"onUpdate:modelValue":o[1]||(o[1]=g=>a.length=g),min:0,precision:2,step:.1,"controls-position":"right",placeholder:"长"},null,8,["modelValue"]),o[10]||(o[10]=u("span",null,"×",-1)),e(r,{modelValue:a.width,"onUpdate:modelValue":o[2]||(o[2]=g=>a.width=g),min:0,precision:2,step:.1,"controls-position":"right",placeholder:"宽"},null,8,["modelValue"]),o[11]||(o[11]=u("span",null,"×",-1)),e(r,{modelValue:a.height,"onUpdate:modelValue":o[3]||(o[3]=g=>a.height=g),min:0,precision:2,step:.1,"controls-position":"right",placeholder:"高"},null,8,["modelValue"]),u("span",{class:"text-secondary"},c(it))])]),_:1}),e(s,{label:"体积重"},{default:t(()=>[e(r,{modelValue:$.value,"onUpdate:modelValue":o[4]||(o[4]=g=>$.value=g),disabled:!0,"controls-position":"right"},null,8,["modelValue"]),u("span",{class:"text-secondary ml-base"},c(Y)),e(D,{content:"体积重 = (长 × 宽 × 高) / 系数",placement:"right"},{default:t(()=>[e(p,{class:"tooltip-icon"},{default:t(()=>[e(U(te))]),_:1})]),_:1})]),_:1}),e(s,{label:"计费重量"},{default:t(()=>[e(r,{modelValue:V.value,"onUpdate:modelValue":o[5]||(o[5]=g=>V.value=g),disabled:!0,"controls-position":"right"},null,8,["modelValue"]),u("span",{class:"text-secondary ml-base"},c(Y)),e(D,{content:"计费重量 = max(实际重量, 体积重)",placement:"right"},{default:t(()=>[e(p,{class:"tooltip-icon"},{default:t(()=>[e(U(te))]),_:1})]),_:1})]),_:1}),e(s,{label:"基础运费"},{default:t(()=>[e(r,{modelValue:_.value,"onUpdate:modelValue":o[6]||(o[6]=g=>_.value=g),disabled:!0,precision:2,"controls-position":"right"},null,8,["modelValue"]),u("span",{class:"text-secondary ml-base"},c(q))]),_:1})]),_:1},8,["model"]),e(j,{data:l.value,border:""},{default:t(()=>[e(E,{prop:"start",label:"起始重量(kg)"},{default:t(({row:g})=>[h(c(g.start.toFixed(2)),1)]),_:1}),e(E,{prop:"end",label:"结束重量(kg)"},{default:t(({row:g})=>[h(c(g.end===1/0?"无限":g.end.toFixed(2)),1)]),_:1}),e(E,{prop:"price",label:"单价"},{default:t(({row:g})=>[h(c(z(g.price)),1)]),_:1}),e(E,{prop:"type",label:"计价方式"},{default:t(({row:g})=>[h(c(g.type==="per_kg"?"每公斤":"每票"),1)]),_:1})]),_:1},8,["data"]),I.value?(w(),B(U(de),{key:0,steps:I.value.steps,title:"计算过程"},null,8,["steps"])):T("",!0)]),_:1})])}}}),dt=A(ct,[["__scopeId","data-v-e23c8944"]]),pt={class:"calculation-steps"},mt={class:"steps-header"},_t={class:"step-formula"},ft=["innerHTML"],ht={key:0,class:"step-result"},gt={class:"result-content"},bt=P({__name:"CalculationSteps",props:{title:{},steps:{}},setup(Z){const n=d=>d.replace(/\*/g,"×").replace(/\//g,"÷").replace(/\+/g," + ").replace(/-/g," - ").replace(/\(/g,"（").replace(/\)/g,"）"),b=d=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(d);return(d,v)=>{const a=_e,l=ke,I=Se;return w(),S("div",pt,[u("div",mt,[u("h4",null,c(d.title),1)]),e(I,{active:d.steps.length,direction:"vertical"},{default:t(()=>[(w(!0),S(K,null,ae(d.steps,($,V)=>(w(),B(l,{key:V,title:$.description},{description:t(()=>[u("div",_t,[e(a,{size:"small",type:"info"},{default:t(()=>v[0]||(v[0]=[h("计算公式")])),_:1}),u("div",{class:"formula-content",innerHTML:n($.formula)},null,8,ft)]),$.result?(w(),S("div",ht,[e(a,{size:"small",type:"success"},{default:t(()=>v[1]||(v[1]=[h("计算结果")])),_:1}),u("div",gt,c(b($.result)),1)])):T("",!0)]),_:2},1032,["title"]))),128))]),_:1},8,["active"])])}}}),de=A(bt,[["__scopeId","data-v-4e78f81d"]]),vt={class:"surcharge-calculator"},yt=P({__name:"SurchargeCalculator",props:{productId:{},weight:{},baseFee:{},zone:{},isRemoteArea:{type:Boolean}},emits:["calculated"],setup(Z,{emit:n}){const b=Z,d=n,v=k([]),a=k(null),l=async()=>{try{const f=await fetch(`/api/products/${b.productId}/surcharges`);if(!f.ok)throw new Error("获取附加费数据失败");v.value=await f.json()}catch(f){console.error("获取附加费数据失败:",f),W.error("获取附加费数据失败")}},I=async()=>{try{const f=await fetch("/api/calculator/surcharges",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:b.productId,weight:b.weight,baseFee:b.baseFee,zone:b.zone,isRemoteArea:b.isRemoteArea})});if(!f.ok)throw new Error("计算附加费失败");const C=await f.json();a.value=C,d("calculated",C.total)}catch(f){console.error("计算附加费失败:",f),W.error("计算附加费失败")}},$=f=>({fixed:"固定金额",percentage:"百分比",per_kg:"每公斤",per_shipment:"每票"})[f]||f,V=(f,C)=>{switch(C){case"percentage":return`${f.toFixed(2)}%`;case"fixed":case"per_kg":case"per_shipment":return _(f);default:return f.toFixed(2)}},_=f=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(f);return X(()=>[b.productId,b.weight,b.baseFee,b.zone,b.isRemoteArea],async([f,C,x,F,z])=>{f&&C&&x&&F!==void 0&&(await l(),await I())},{immediate:!0}),(f,C)=>{const x=ie,F=ue,z=H;return w(),S("div",vt,[e(z,null,{header:t(()=>C[0]||(C[0]=[u("div",{class:"card-header"},[u("h3",null,"附加费计算器")],-1)])),default:t(()=>[e(F,{data:v.value,border:""},{default:t(()=>[e(x,{prop:"name",label:"附加费名称"}),e(x,{prop:"type",label:"类型"},{default:t(({row:m})=>[h(c($(m.type)),1)]),_:1}),e(x,{prop:"rate",label:"费率"},{default:t(({row:m})=>[h(c(V(m.rate,m.type)),1)]),_:1}),e(x,{prop:"condition",label:"触发条件"}),e(x,{prop:"amount",label:"金额"},{default:t(({row:m})=>[h(c(_(m.amount)),1)]),_:1})]),_:1},8,["data"]),a.value?(w(),B(de,{key:0,steps:a.value.steps,title:"计算过程"},null,8,["steps"])):T("",!0)]),_:1})])}}}),wt=A(yt,[["__scopeId","data-v-0387f628"]]),$t={class:"fuel-rate-calculator"},Ct={class:"card-header"},Ft={class:"card-actions"},Vt={class:"result-content mt-base"},xt={class:"rate-trend mt-4"},me="CNY",It=P({__name:"FuelRateCalculator",props:{productId:{},baseFee:{}},emits:["calculated"],setup(Z,{emit:n}){const b=Z,d=n,v=k({baseFee:b.baseFee||0}),a=k(null),l=k(null),I=M(()=>!a.value||!v.value.baseFee?0:v.value.baseFee*(a.value.rate/100)),$=M(()=>a.value?`当前燃油费率为 ${a.value.rate.toFixed(2)}%，生效日期 ${m(a.value.effectiveDate)}`:"暂无费率数据"),V=k();let _=null;const f=()=>{v.value.baseFee=0,l.value=null},C=async()=>{try{const p=await fetch(`/api/products/${b.productId}/fuel-rate`);a.value=await p.json()}catch(p){console.error("获取燃油费率数据失败:",p)}},x=async()=>{try{const i=await(await fetch(`/api/products/${b.productId}/fuel-rate/history`)).json();z(i)}catch(p){console.error("获取燃油费率历史数据失败:",p)}},F=async()=>{try{const i=await(await fetch("/api/calculator/fuel-surcharge",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productId:b.productId,baseFee:v.value.baseFee})})).json();l.value=i,d("calculated",i.total)}catch(p){console.error("计算燃油附加费失败:",p)}},z=p=>{if(!V.value)return;_||(_=We(V.value));const i={tooltip:{trigger:"axis",formatter:r=>{const s=r[0];return`${s.name}<br/>费率: ${(s.value*100).toFixed(2)}%`}},xAxis:{type:"category",data:p.map(r=>m(r.date)),axisLabel:{rotate:45}},yAxis:{type:"value",axisLabel:{formatter:r=>`${(r*100).toFixed(2)}%`}},series:[{name:"燃油费率",type:"line",data:p.map(r=>r.rate),smooth:!0,symbol:"circle",symbolSize:8,itemStyle:{color:"#409EFF"},areaStyle:{color:new Ze(0,0,0,1,[{offset:0,color:"rgba(64,158,255,0.3)"},{offset:1,color:"rgba(64,158,255,0.1)"}])}}]};_.setOption(i)},m=p=>Ee(p).format("YYYY-MM-DD"),o=p=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(p);return X(()=>[b.productId,v.value.baseFee],async([p,i])=>{p&&i&&(await C(),await x(),await F())},{immediate:!0}),Ue(()=>{window.addEventListener("resize",()=>{_==null||_.resize()})}),ze(()=>{_==null||_.dispose(),window.removeEventListener("resize",()=>{_==null||_.resize()})}),(p,i)=>{const r=he,s=ce,D=re,R=ne,E=fe,j=se,N=oe,g=le,O=H;return w(),S("div",$t,[e(O,null,{header:t(()=>[u("div",Ct,[i[4]||(i[4]=u("h3",{class:"card-title"},"燃油费率计算",-1)),u("div",Ft,[e(s,{type:"primary",onClick:F},{default:t(()=>[e(r,null,{default:t(()=>[e(U(Ne))]),_:1}),i[2]||(i[2]=h("计算 "))]),_:1}),e(s,{onClick:f},{default:t(()=>[e(r,null,{default:t(()=>[e(U(Te))]),_:1}),i[3]||(i[3]=h("重置 "))]),_:1})])])]),default:t(()=>[e(j,{model:v.value,"label-width":"120px"},{default:t(()=>[e(R,{label:"基础运费",required:""},{default:t(()=>[e(D,{modelValue:v.value.baseFee,"onUpdate:modelValue":i[0]||(i[0]=L=>v.value.baseFee=L),min:0,precision:2,step:10,"controls-position":"right"},null,8,["modelValue"]),u("span",{class:"text-secondary ml-base"},c(me))]),_:1}),e(R,{label:"燃油费率"},{default:t(()=>[e(D,{"model-value":a.value?a.value.rate:0,disabled:!0,precision:2,"controls-position":"right"},null,8,["model-value"]),i[5]||(i[5]=u("span",{class:"text-secondary ml-base"},"%",-1)),e(E,{content:$.value,placement:"right"},{default:t(()=>[e(r,{class:"tooltip-icon"},{default:t(()=>[e(U(te))]),_:1})]),_:1},8,["content"])]),_:1}),e(R,{label:"燃油附加费"},{default:t(()=>[e(D,{modelValue:I.value,"onUpdate:modelValue":i[1]||(i[1]=L=>I.value=L),disabled:!0,precision:2,"controls-position":"right"},null,8,["modelValue"]),u("span",{class:"text-secondary ml-base"},c(me))]),_:1})]),_:1},8,["model"]),u("div",Vt,[e(g,{column:1,border:""},{default:t(()=>[e(N,{label:"计算公式"},{default:t(()=>i[6]||(i[6]=[h(" 燃油附加费 = 基础运费 × 燃油费率 ")])),_:1}),e(N,{label:"计算明细"},{default:t(()=>[h(c(v.value.baseFee)+" × "+c(a.value?a.value.rate:0)+"% = "+c(I.value),1)]),_:1})]),_:1})]),e(g,{column:2,border:""},{default:t(()=>[e(N,{label:"当前燃油费率"},{default:t(()=>[h(c(a.value?a.value.rate.toFixed(2)+"%":"暂无数据"),1)]),_:1}),e(N,{label:"生效日期"},{default:t(()=>[h(c(a.value?m(a.value.effectiveDate):"暂无数据"),1)]),_:1}),e(N,{label:"基准价格"},{default:t(()=>[h(c(a.value?o(a.value.basePrice):"暂无数据"),1)]),_:1}),e(N,{label:"当前价格"},{default:t(()=>[h(c(a.value?o(a.value.currentPrice):"暂无数据"),1)]),_:1})]),_:1}),u("div",xt,[i[7]||(i[7]=u("h4",null,"费率历史趋势",-1)),u("div",{ref_key:"chartRef",ref:V,class:"chart"},null,512)]),l.value?(w(),B(de,{key:0,steps:l.value.steps,title:"计算过程"},null,8,["steps"])):T("",!0)]),_:1})])}}}),St=A(It,[["__scopeId","data-v-97a79959"]]),kt={class:"freight-calculator"},Et={key:0,class:"calculators mt-4"},Ut={key:1,class:"calculation-result mt-4"},zt={class:"text-xl font-bold text-primary"},Nt=P({__name:"index",setup(Z){const n=ee({productId:"",fromZip:"",toZip:"",weight:1,length:1,width:1,height:1}),b={productId:[{required:!0,message:"请选择产品",trigger:"change"}],fromZip:[{required:!0,message:"请输入寄件邮编",trigger:"blur"}],toZip:[{required:!0,message:"请输入收件邮编",trigger:"blur"}],weight:[{required:!0,type:"number",min:.1,message:"请输入有效重量",trigger:"blur"}]},d=k(0),v=k(!1),a=k([]),l=ee({baseFee:0,fuelSurcharge:0,otherSurcharges:0,total:0,details:[]}),I=k(["detail"]),$=k("single"),V=k(!1),_=async()=>{try{const r=await fetch("/api/products/active");a.value=await r.json()}catch{W.error("获取产品列表失败")}},f=r=>{},C=async()=>{try{const r=await fetch("/api/calculator/calculate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!r.ok)throw new Error("计算失败");const s=await r.json();Object.assign(l,s)}catch{W.error("运费计算失败")}},x=()=>{Object.assign(n,{productId:"",fromZip:"",toZip:"",weight:1,length:1,width:1,height:1}),Object.assign(l,{baseFee:0,fuelSurcharge:0,otherSurcharges:0,total:0,details:[]})},F=r=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(r),z=async()=>{try{const s=await(await fetch("/api/postal/zone",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({fromZip:n.fromZip,toZip:n.toZip})})).json();d.value=s.zone,v.value=s.isRemoteArea}catch(r){console.error("获取分区信息失败:",r)}},m=r=>{l.baseFee=r,i()},o=r=>{l.otherSurcharges=r,i()},p=r=>{l.fuelSurcharge=r,i()},i=()=>{l.total=l.baseFee+l.fuelSurcharge+l.otherSurcharges};return X(()=>[n.fromZip,n.toZip],async([r,s])=>{r&&s&&await z()}),_(),(r,s)=>{const D=Ae,R=Oe,E=ne,j=Be,N=Le,g=Re,O=re,L=ce,ge=se,J=oe,be=le,Q=ie,ve=ue,ye=Pe,we=Me,pe=De,$e=je,Ce=H;return w(),S("div",kt,[e(Ce,null,{header:t(()=>s[9]||(s[9]=[u("div",{class:"card-header"},[u("h2",null,"运费计算器")],-1)])),default:t(()=>[e($e,{modelValue:$.value,"onUpdate:modelValue":s[8]||(s[8]=y=>$.value=y),type:"border-card"},{default:t(()=>[e(pe,{label:"单票计算",name:"single"},{default:t(()=>[e(ge,{ref:"formRef",model:n,rules:b,"label-width":"120px",class:"calculator-form"},{default:t(()=>[e(g,{gutter:20},{default:t(()=>[e(j,{span:8},{default:t(()=>[e(E,{label:"产品"},{default:t(()=>[e(R,{modelValue:n.productId,"onUpdate:modelValue":s[0]||(s[0]=y=>n.productId=y),placeholder:"请选择产品",onChange:f},{default:t(()=>[(w(!0),S(K,null,ae(a.value,y=>(w(),B(D,{key:y.id,label:y.name,value:y.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(j,{span:8},{default:t(()=>[e(E,{label:"寄件邮编"},{default:t(()=>[e(N,{modelValue:n.fromZip,"onUpdate:modelValue":s[1]||(s[1]=y=>n.fromZip=y),placeholder:"请输入寄件邮编"},null,8,["modelValue"])]),_:1})]),_:1}),e(j,{span:8},{default:t(()=>[e(E,{label:"收件邮编"},{default:t(()=>[e(N,{modelValue:n.toZip,"onUpdate:modelValue":s[2]||(s[2]=y=>n.toZip=y),placeholder:"请输入收件邮编"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(g,{gutter:20},{default:t(()=>[e(j,{span:8},{default:t(()=>[e(E,{label:"重量(kg)"},{default:t(()=>[e(O,{modelValue:n.weight,"onUpdate:modelValue":s[3]||(s[3]=y=>n.weight=y),min:.1,precision:2},null,8,["modelValue"])]),_:1})]),_:1}),e(j,{span:16},{default:t(()=>[e(E,{label:"尺寸(cm)"},{default:t(()=>[e(O,{modelValue:n.length,"onUpdate:modelValue":s[4]||(s[4]=y=>n.length=y),min:1,class:"w-20",placeholder:"长"},null,8,["modelValue"]),s[10]||(s[10]=u("span",{class:"mx-2"},"×",-1)),e(O,{modelValue:n.width,"onUpdate:modelValue":s[5]||(s[5]=y=>n.width=y),min:1,class:"w-20",placeholder:"宽"},null,8,["modelValue"]),s[11]||(s[11]=u("span",{class:"mx-2"},"×",-1)),e(O,{modelValue:n.height,"onUpdate:modelValue":s[6]||(s[6]=y=>n.height=y),min:1,class:"w-20",placeholder:"高"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(E,null,{default:t(()=>[e(L,{type:"primary",onClick:C},{default:t(()=>s[12]||(s[12]=[h("计算运费")])),_:1}),e(L,{onClick:x},{default:t(()=>s[13]||(s[13]=[h("重置")])),_:1})]),_:1})]),_:1},8,["model"]),V.value?(w(),S(K,{key:0},[n.productId&&n.fromZip&&n.toZip&&n.weight>0?(w(),S("div",Et,[e(U(dt),{"product-id":n.productId,weight:n.weight,zone:d.value,onCalculated:m},null,8,["product-id","weight","zone"]),l.baseFee>0?(w(),B(U(wt),{key:0,"product-id":n.productId,weight:n.weight,"base-fee":l.baseFee,zone:d.value,"is-remote-area":v.value,onCalculated:o},null,8,["product-id","weight","base-fee","zone","is-remote-area"])):T("",!0),l.baseFee>0?(w(),B(U(St),{key:1,"product-id":n.productId,"base-fee":l.baseFee,onCalculated:p},null,8,["product-id","base-fee"])):T("",!0)])):T("",!0)],64)):T("",!0),l.total>0?(w(),S("div",Ut,[e(be,{title:"计算结果",column:2,border:""},{default:t(()=>[e(J,{label:"基础运费"},{default:t(()=>[h(c(F(l.baseFee)),1)]),_:1}),e(J,{label:"燃油附加费"},{default:t(()=>[h(c(F(l.fuelSurcharge)),1)]),_:1}),e(J,{label:"其他附加费"},{default:t(()=>[h(c(F(l.otherSurcharges)),1)]),_:1}),e(J,{label:"总费用"},{default:t(()=>[u("span",zt,c(F(l.total)),1)]),_:1})]),_:1}),e(we,{modelValue:I.value,"onUpdate:modelValue":s[7]||(s[7]=y=>I.value=y),class:"mt-4"},{default:t(()=>[e(ye,{title:"费用明细",name:"detail"},{default:t(()=>[e(ve,{data:l.details,border:""},{default:t(()=>[e(Q,{prop:"name",label:"费用项"}),e(Q,{prop:"description",label:"说明"}),e(Q,{prop:"amount",label:"金额"},{default:t(({row:y})=>[h(c(F(y.amount)),1)]),_:1})]),_:1},8,["data"])]),_:1})]),_:1},8,["modelValue"])])):T("",!0)]),_:1}),e(pe,{label:"批量计算",name:"batch"},{default:t(()=>[e(U(ot))]),_:1})]),_:1},8,["modelValue"])]),_:1})])}}}),Rt=A(Nt,[["__scopeId","data-v-5d1efb93"]]);export{Rt as default};
