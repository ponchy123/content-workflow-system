import{h as x,r as _,a as T,o as E,E as f,i as h,y as s,x as o,aL as C,t as n,aF as A,aM as D,A as B,j as N,aG as L,H as a,L as m,P as M}from"./vendor-BxNawP4f.js";import{s as u,_ as P}from"./index-DyxCg8e9.js";const V={class:"test-page"},j={class:"info-section"},H={class:"button-group"},J=x({__name:"TestPage",setup(F){const g=M(),t=_(u.get("token")||localStorage.getItem("token")||"未找到Token"),d=_(u.get("user_info")||JSON.parse(localStorage.getItem("user_info")||"{}")),v=T(()=>typeof t.value=="string"&&t.value.length>20?t.value.substring(0,10)+"..."+t.value.substring(t.value.length-10):t.value);E(()=>{console.log("测试页面加载成功"),console.log("localStorage中的token:",localStorage.getItem("token")),console.log("localStorage中的用户信息:",localStorage.getItem("user_info")),localStorage.getItem("token")||f.warning("未检测到有效的登录凭证，请重新登录")});const k=()=>{g.push("/")},S=()=>{var i,l;const e=((l=(i=d.value)==null?void 0:i.roles)==null?void 0:l.includes("admin"))?"/admin/dashboard":"/dashboard";g.push(e)},I=()=>{localStorage.removeItem("token"),localStorage.removeItem("user_info"),sessionStorage.removeItem("token"),sessionStorage.removeItem("user_info"),u.remove("token"),u.remove("user_info"),document.cookie="token=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;",f.success("已清除所有登录凭证"),setTimeout(()=>{window.location.href=window.location.origin+"/auth/login"},1e3)};return(b,e)=>{const i=C,l=L,y=A,w=D,c=B;return N(),h("div",V,[e[6]||(e[6]=s("h1",null,"测试页面",-1)),e[7]||(e[7]=s("p",{class:"welcome-text"},"如果你看到这个页面，说明导航成功了!",-1)),o(i,{title:"登录状态测试",type:"success",closable:!1,description:"这个页面用于测试登录和导航功能是否正常","show-icon":""}),s("div",j,[e[0]||(e[0]=s("h2",null,"用户状态信息",-1)),e[1]||(e[1]=s("p",null,"当前用户信息:",-1)),o(y,{border:""},{default:n(()=>[o(l,{label:"用户名"},{default:n(()=>{var r;return[a(m(((r=d.value)==null?void 0:r.username)||"未知"),1)]}),_:1}),o(l,{label:"角色"},{default:n(()=>{var r,p;return[a(m(((p=(r=d.value)==null?void 0:r.roles)==null?void 0:p.join(", "))||"无角色信息"),1)]}),_:1}),o(l,{label:"登录状态"},{default:n(()=>[a(m(t.value?"已登录":"未登录"),1)]),_:1})]),_:1}),e[2]||(e[2]=s("h3",null,"Token信息",-1)),o(w,{type:"textarea","model-value":String(v.value),rows:3,readonly:""},null,8,["model-value"])]),s("div",H,[o(c,{type:"primary",onClick:S},{default:n(()=>e[3]||(e[3]=[a("前往仪表盘")])),_:1}),o(c,{onClick:k},{default:n(()=>e[4]||(e[4]=[a("返回首页")])),_:1}),o(c,{type:"danger",onClick:I},{default:n(()=>e[5]||(e[5]=[a("清除凭证并登出")])),_:1})])])}}}),R=P(J,[["__scopeId","data-v-6641d907"]]);export{R as default};
