import{g as n,d as u,p as i,b as l}from"./index-DyxCg8e9.js";const d={list:"/api/v1/products/products/",products:"/api/v1/products/products/",detail:t=>/^\d+$/.test(t)?`/api/v1/products/products/${t}/`:`/api/v1/products/products/?code=${t}`,create:"/api/v1/products/products/",update:t=>`/api/v1/products/products/${t}/`,delete:t=>`/api/v1/products/products/${t}/`};async function y(t){const e=new Date().getTime(),a={...t,show_all:!0,t:e};try{console.log("开始请求产品列表，参数:",a);const r=await n(d.products,{params:a});if(console.log("API原始响应:",r),r&&r.data){const s=r.data.data||r.data;let c=[];s&&typeof s=="object"&&!Array.isArray(s)?c=Object.values(s):Array.isArray(s)&&(c=s);const o=r.data.count||r.data.total||c.length||0;return{status:"success",code:"200",message:"Success",data:c,timestamp:new Date().toISOString(),total:o}}return{status:"error",code:"500",message:"响应格式错误",data:[],timestamp:new Date().toISOString(),total:0}}catch(r){return console.error("获取产品列表失败:",r),{status:"error",code:"500",message:"获取数据失败",data:[],timestamp:new Date().toISOString(),total:0}}}async function h(t){try{console.log("开始获取产品详情, 产品代码:",t);const e=new Date().getTime(),a=d.detail(t);console.log("正在请求产品详情，URL:",a);const r=await n(a,{params:{t:e}});if(console.log("产品详情API响应:",r),r&&r.data){let s=null;if(Array.isArray(r.data.data)||r.data.data&&typeof r.data.data=="object"&&!r.data.data.id){console.log("使用产品代码查询，返回了列表数据");let c=[];Array.isArray(r.data.data)?c=r.data.data:typeof r.data.data=="object"&&(c=Object.values(r.data.data)),s=c.find(o=>{if(!o)return!1;const p=String(o.code||"").trim(),g=String(t||"").trim(),f=p===g;return console.log(`比较: 项目代码 "${p}" 与 搜索代码 "${g}", 匹配结果: ${f}`),f}),s||(console.warn(`未找到匹配的产品，请求代码: ${t}`),console.log("可用的产品代码:"),c.forEach(o=>{o&&o.code&&console.log(`- ${o.code} (ID: ${o.id})`)}),s=c.find(o=>o&&o.id),s&&console.warn(`使用第一个有效产品作为备选: ${s.code} (ID: ${s.id})`))}else s=r.data.data||r.data;if(console.log("处理后的产品详情数据:",JSON.stringify(s,null,2)),s)return console.log("产品代码:",s.code),console.log("产品ID:",s.id),console.log("产品名称:",s.name),s;throw new Error(`未找到产品代码为 ${t} 的产品`)}throw new Error("获取产品详情失败")}catch(e){throw console.error("获取产品详情失败:",e),e}}async function m(t){return i(d.create,t)}async function w(t,e){return l(d.update(t),e)}async function $(t){return u(d.delete(t))}const b=y,S=h;async function D(t){var e;try{console.log("获取重量范围，产品ID:",t);const a=await n("/api/v1/products/weight-ranges/",{params:{product_id:t}});return(e=a==null?void 0:a.data)!=null&&e.data&&Object.keys(a.data.data).length>0?Object.values(a.data.data):[]}catch(a){return console.error("获取重量范围失败:",a),[]}}async function j(t){var e;try{console.log("获取区域价格，产品ID:",t);const a=await n("/api/v1/products/zone-prices/",{params:{product_id:t}});return(e=a==null?void 0:a.data)!=null&&e.data&&Object.keys(a.data.data).length>0?Object.values(a.data.data):[]}catch(a){return console.error("获取区域价格失败:",a),[]}}async function O(t){var e;try{console.log("获取附加费，产品ID:",t);const a=await n("/api/v1/products/surcharges/",{params:{product_id:t}});return(e=a==null?void 0:a.data)!=null&&e.data&&Object.keys(a.data.data).length>0?Object.values(a.data.data):[]}catch(a){return console.error("获取附加费失败:",a),[]}}async function A(t){return i("/api/v1/products/base-fees/",t)}async function P(t,e){return l(`/api/v1/products/base-fees/${t}/`,e)}async function I(t){return u(`/api/v1/products/base-fees/${t}/`)}async function F(t){return i("/api/v1/products/surcharges/",t)}async function k(t,e){return l(`/api/v1/products/surcharges/${t}/`,e)}async function _(t){return u(`/api/v1/products/surcharges/${t}/`)}async function B(t){return i("/api/v1/products/seasonal-fees/",t)}async function E(t,e){return l(`/api/v1/products/seasonal-fees/${t}/`,e)}async function N(t){return u(`/api/v1/products/seasonal-fees/${t}/`)}async function q(t){var e;try{console.log("获取增值服务，产品ID:",t);const a=await n("/api/v1/products/value-added-services/",{params:{product_id:t}});return(e=a==null?void 0:a.data)!=null&&e.data&&Object.keys(a.data.data).length>0?Object.values(a.data.data):[]}catch(a){return console.error("获取增值服务失败:",a),[]}}export{D as a,O as b,m as c,$ as d,j as e,q as f,b as g,P as h,A as i,I as j,_ as k,F as l,k as m,N as n,B as o,E as p,S as q,w as u};
