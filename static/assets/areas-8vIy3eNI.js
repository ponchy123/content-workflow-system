import{h as X,r as n,aq as Y,i as f,x as l,au as Z,t,y as v,aH as ee,aI as ae,aJ as le,H as r,L as k,aD as w,aE as x,bo as te,A as oe,bs as se,bg as ne,aN as re,aP as de,aM as ue,ax as pe,as as ie,ae as me,E as y,j as p,p as U,ay as ce}from"./vendor-BxNawP4f.js";import{_ as _e}from"./index-DyxCg8e9.js";const ge={class:"service-areas"},fe={class:"card-header"},ve={class:"pagination"},ye={class:"dialog-footer"},be=X({__name:"areas",setup(Ce){const h=[{value:"standard",label:"标准区域"},{value:"remote",label:"偏远区域"},{value:"special",label:"特殊区域"}],B=s=>({standard:"success",remote:"warning",special:"danger"})[s]||"success",P=s=>({standard:"标准区域",remote:"偏远区域",special:"特殊区域"})[s]||s,q=n([]),b=n(1),C=n(10),D=n(0),F=n([]),d=n(!1),i=n("add"),V=n(),o=Y({id:0,name:"",code:"",type:"standard",postalCodes:[],status:!0}),I={name:[{required:!0,message:"请输入区域名称",trigger:"blur"}],code:[{required:!0,message:"请输入区域代码",trigger:"blur"}],type:[{required:!0,message:"请选择区域类型",trigger:"change"}],postalCodes:[{required:!0,message:"请选择包含的邮编",trigger:"change"},{type:"array",min:1,message:"至少选择一个邮编",trigger:"change"}]},m=async()=>{},N=async()=>{},A=s=>{C.value=s,m()},L=s=>{b.value=s,m()},M=()=>{i.value="add",o.id=0,o.name="",o.code="",o.type="standard",o.postalCodes=[],o.status=!0,d.value=!0},$=s=>{i.value="edit",Object.assign(o,s),d.value=!0},j=async s=>{try{await me.confirm("确定要删除该区域吗？","提示",{type:"warning"}),y.success("删除成功"),m()}catch(e){e!=="cancel"&&(console.error("Failed to delete service area:",e),y.error("删除失败"))}},H=async()=>{V.value&&await V.value.validate(async s=>{if(s)try{y.success(i.value==="add"?"添加成功":"更新成功"),d.value=!1,m()}catch(e){console.error("Failed to save service area:",e),y.error(i.value==="add"?"添加失败":"更新失败")}})};return m(),N(),(s,e)=>{const c=oe,u=ae,E=le,O=te,R=ee,G=se,J=Z,z=ue,_=de,S=ce,T=pe,K=ie,Q=re,W=ne;return p(),f("div",ge,[l(J,null,{header:t(()=>[v("div",fe,[e[10]||(e[10]=v("span",null,"服务区域",-1)),l(c,{type:"primary",onClick:M},{default:t(()=>e[9]||(e[9]=[r("添加区域")])),_:1})])]),default:t(()=>[l(R,{data:q.value,border:"",stripe:""},{default:t(()=>[l(u,{prop:"name",label:"区域名称",width:"150"}),l(u,{prop:"code",label:"区域代码",width:"120"}),l(u,{prop:"type",label:"区域类型",width:"120"},{default:t(({row:a})=>[l(E,{type:B(a.type)},{default:t(()=>[r(k(P(a.type)),1)]),_:2},1032,["type"])]),_:1}),l(u,{prop:"postalCodes",label:"包含邮编","min-width":"200"},{default:t(({row:a})=>[(p(!0),f(w,null,x(a.postalCodes,g=>(p(),U(E,{key:g,class:"mx-1",size:"small"},{default:t(()=>[r(k(g),1)]),_:2},1024))),128))]),_:1}),l(u,{prop:"status",label:"状态",width:"100"},{default:t(({row:a})=>[l(E,{type:a.status?"success":"danger"},{default:t(()=>[r(k(a.status?"启用":"禁用"),1)]),_:2},1032,["type"])]),_:1}),l(u,{label:"操作",width:"200"},{default:t(({row:a})=>[l(O,null,{default:t(()=>[l(c,{type:"primary",link:"",onClick:g=>$(a)},{default:t(()=>e[11]||(e[11]=[r("编辑")])),_:2},1032,["onClick"]),l(c,{type:"danger",link:"",onClick:g=>j(a)},{default:t(()=>e[12]||(e[12]=[r("删除")])),_:2},1032,["onClick"])]),_:2},1024)]),_:1})]),_:1},8,["data"]),v("div",ve,[l(G,{"current-page":b.value,"onUpdate:currentPage":e[0]||(e[0]=a=>b.value=a),"page-size":C.value,"onUpdate:pageSize":e[1]||(e[1]=a=>C.value=a),total:D.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next",onSizeChange:A,onCurrentChange:L},null,8,["current-page","page-size","total"])])]),_:1}),l(W,{modelValue:d.value,"onUpdate:modelValue":e[8]||(e[8]=a=>d.value=a),title:i.value==="add"?"添加区域":"编辑区域",width:"600px"},{footer:t(()=>[v("span",ye,[l(c,{onClick:e[7]||(e[7]=a=>d.value=!1)},{default:t(()=>e[13]||(e[13]=[r("取消")])),_:1}),l(c,{type:"primary",onClick:H},{default:t(()=>e[14]||(e[14]=[r("确定")])),_:1})])]),default:t(()=>[l(Q,{ref_key:"formRef",ref:V,model:o,rules:I,"label-width":"100px"},{default:t(()=>[l(_,{label:"区域名称",prop:"name"},{default:t(()=>[l(z,{modelValue:o.name,"onUpdate:modelValue":e[2]||(e[2]=a=>o.name=a),maxlength:"50"},null,8,["modelValue"])]),_:1}),l(_,{label:"区域代码",prop:"code"},{default:t(()=>[l(z,{modelValue:o.code,"onUpdate:modelValue":e[3]||(e[3]=a=>o.code=a),maxlength:"20"},null,8,["modelValue"])]),_:1}),l(_,{label:"区域类型",prop:"type"},{default:t(()=>[l(T,{modelValue:o.type,"onUpdate:modelValue":e[4]||(e[4]=a=>o.type=a)},{default:t(()=>[(p(),f(w,null,x(h,a=>l(S,{key:a.value,label:a.label,value:a.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"包含邮编",prop:"postalCodes"},{default:t(()=>[l(T,{modelValue:o.postalCodes,"onUpdate:modelValue":e[5]||(e[5]=a=>o.postalCodes=a),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"请输入或选择邮编"},{default:t(()=>[(p(!0),f(w,null,x(F.value,a=>(p(),U(S,{key:a,label:a,value:a},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),l(_,{label:"状态",prop:"status"},{default:t(()=>[l(K,{modelValue:o.status,"onUpdate:modelValue":e[6]||(e[6]=a=>o.status=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}}),ke=_e(be,[["__scopeId","data-v-e2d901ad"]]);export{ke as default};
