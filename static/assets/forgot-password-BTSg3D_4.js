import{h as B,r as l,i as p,x as s,t as a,N as I,aN as P,aO as R,y as t,aP as S,aM as F,q as _,aS as L,A as T,H as f,L as q,aR as A,C as K,aT as M,au as j,E as g,P as D,j as v}from"./vendor-BxNawP4f.js";import{u as H}from"./useAuth-DsFeK4Ey.js";import{_ as O}from"./index-DyxCg8e9.js";const U={class:"forgot-password-container"},z={class:"back-to-login"},G={key:0,class:"success-message"},J=B({__name:"forgot-password",setup(Q){const u=l(),r=l({email:""}),n=l(!1),c=l(!1),y=D(),{forgotPassword:b}=H(),k=l({email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{type:"email",message:"请输入有效的邮箱地址",trigger:"blur"}]}),d=async()=>{var i,e;if(u.value)try{await u.value.validate(),n.value=!0;const o=await b(r.value.email);c.value=!0}catch(o){console.error("Failed to send reset link:",o),(e=(i=o.response)==null?void 0:i.data)!=null&&e.detail?g.error(o.response.data.detail):g.error(o.message||"发送失败，请稍后重试")}finally{n.value=!1}},E=()=>{y.push("/auth/login")};return(i,e)=>{const o=F,m=S,h=T,w=A,x=P,C=K,V=j;return v(),p("div",U,[s(V,{class:"forgot-password-card"},{header:a(()=>e[1]||(e[1]=[t("div",{class:"card-header"},[t("h2",{class:"header-title"},"找回密码"),t("p",{class:"header-subtitle"},"我们将向您的邮箱发送重置密码的链接")],-1)])),default:a(()=>[s(x,{ref_key:"formRef",ref:u,model:r.value,rules:k.value,"label-position":"top",onKeyup:R(d,["enter"])},{default:a(()=>[s(m,{label:"邮箱",prop:"email"},{default:a(()=>[s(o,{modelValue:r.value.email,"onUpdate:modelValue":e[0]||(e[0]=N=>r.value.email=N),placeholder:"请输入您的邮箱","prefix-icon":_(L)},null,8,["modelValue","prefix-icon"])]),_:1}),s(m,null,{default:a(()=>[s(h,{type:"primary",loading:n.value,class:"submit-button",onClick:d},{default:a(()=>[f(q(n.value?"提交中...":"发送重置链接"),1)]),_:1},8,["loading"])]),_:1}),t("div",z,[s(w,{type:"primary",onClick:E},{default:a(()=>e[2]||(e[2]=[f("返回登录")])),_:1})])]),_:1},8,["model","rules"]),c.value?(v(),p("div",G,[s(C,{class:"success-icon"},{default:a(()=>[s(_(M))]),_:1}),e[3]||(e[3]=t("p",null,"重置密码链接已发送至您的邮箱，请注意查收。",-1)),e[4]||(e[4]=t("p",{class:"note"},"如未收到邮件，请检查垃圾邮件文件夹或稍后再试。",-1))])):I("",!0)]),_:1})])}}}),Z=O(J,[["__scopeId","data-v-19eb9c36"]]);export{Z as default};
