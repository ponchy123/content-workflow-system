const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/dashboard-CETISQqx.js","assets/vendor-BxNawP4f.js","assets/vendor-BmpqmmFU.css","assets/dashboard-kxyuPGb-.css","assets/TestPage-g32Q9rm3.js","assets/TestPage-DysbBPjY.css","assets/404-jnfAsSbU.js","assets/404-Qu0Di2Io.css","assets/403-C_oEEruu.js","assets/403-p-RMBpko.css","assets/500-ChjANSFt.js","assets/500-lAJYeNVj.css","assets/auth-ByGfzCuM.js","assets/auth-jx46p-RU.css","assets/login-CSXs83Nb.js","assets/useAuth-DsFeK4Ey.js","assets/login-D44_ohCs.css","assets/register-Yjzr85HM.js","assets/register-BC9QD0Ve.css","assets/forgot-password-BTSg3D_4.js","assets/forgot-password-UmlDdXhl.css","assets/reset-password-CSXnGeo2.js","assets/reset-password-QHl4GqK7.css","assets/index-_xIrNav-.js","assets/index-DdmqVHKO.js","assets/index-BkRXl3Uq.css","assets/PostalCodeInput-D5wpVPnE.css","assets/ResultDisplay-DaPs_zat.css","assets/single-CED7AcLx.js","assets/AddressSelector.vue_vue_type_style_index_0_lang-DCS-l7wX.js","assets/AddressSelector-BUmYXubP.css","assets/index-N1Xkh6eW.js","assets/index-C4Uq_sZu.js","assets/single-Dsbmow1x.css","assets/batch-ClyofT1X.js","assets/FormCard.vue_vue_type_script_setup_true_lang-C9NvR83c.js","assets/DataTable.vue_vue_type_script_setup_true_lang-H7XCXiZN.js","assets/batch-1bT87Ucc.css","assets/compare-DwbDriMQ.js","assets/compare-CAddMlwL.css","assets/history-FgZ75WFq.js","assets/history-Clwt9phY.js","assets/history-DvAn29b5.css","assets/history-detail-kfLzjLaP.js","assets/history-detail-BNmZWq0s.css","assets/index-CnygEL8S.js","assets/index-BpzqbR7U.css","assets/list-DTOWQ5sR.js","assets/products-DYzYKE6u.js","assets/list-fd94mwx2.css","assets/detail-C3pBtLeK.js","assets/detail-CrDQdBQ3.css","assets/SeasonalFeeForm-Dh2IwZF9.css","assets/edit-B0xngtR1.js","assets/edit-C00x_evB.css","assets/index-CMw8piW4.js","assets/codes-ClMAeQLv.js","assets/codes-BXNIQQyL.css","assets/areas-8vIy3eNI.js","assets/areas-CZx-CUqb.css","assets/index-DeTPfkBU.css","assets/index-B1SplW1F.js","assets/index-DBC5aEEZ.css","assets/index-CsQbHox1.js","assets/StatisticsChart-BS-ZCQ9K.js","assets/StatisticsChart-BJSgj_zJ.css","assets/index-D8htOnL4.css","assets/usage-otyygXu7.js","assets/usage-WUaQ45Nm.css","assets/cost-BQwsyqtA.js","assets/cost-DetGkj9O.css","assets/export-D8MruO9f.js","assets/export-zyVHG8Rc.css","assets/index-ChHKNF81.js","assets/notification-DH1Fk0TC.js","assets/index-BRpzABXf.css","assets/settings-DgjvTSen.js","assets/settings-ua3TsPK0.css","assets/index-DBYcsz0B.js","assets/index-Du1orvvN.css","assets/profile-A2DlH_VW.js","assets/profile-DCQimNSm.css","assets/settings-DdlxIYRU.js","assets/settings-_Dwg7UFp.css","assets/dashboard-BLJNojG0.js","assets/dashboard-C3wtgUNK.css","assets/users-BVLfJ9dR.js","assets/users-DK910p3f.css","assets/roles-DjJnr_HT.js","assets/roles-ShCODdF6.css","assets/permissions-BjEFApgg.js","assets/permissions-DeZaqbky.css","assets/audit-logs-CGnuUZhG.js","assets/audit-logs-hT23XEFc.css","assets/settings-oUiDS6xv.js","assets/settings-BiXldO8f.css","assets/backup-C8HjTwBC.js","assets/backup-CyX3BGqT.css","assets/monitor-3FBRhUED.js","assets/monitor-OhEQfRAO.css"])))=>i.map(i=>d[i]);
var ze=Object.defineProperty;var Me=(e,t,o)=>t in e?ze(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o;var ee=(e,t,o)=>Me(e,typeof t!="symbol"?t+"":t,o);import{c as He,d as re,r as S,a as C,b as Te,e as se,u as U,f as qe,g as Be,w as je,n as Ke,E as K,h as z,o as ae,i as Y,j as D,k as ne,l as ke,z as Ye,m as We,p as x,q as _,s as Je,t as r,v as Re,x as n,y,A as Ge,B as Xe,C as ye,D as Se,F as Qe,G as Ze,H as E,I as et,J as tt,K as ot,L as ue,M as st,N as nt,O as rt,P as at,Q as it,R as lt,S as ct,T as ut,U as dt,V as mt,W as pt,X as ft,Y as ht,Z as _t,_ as gt,$ as Et,a0 as vt,a1 as Tt,a2 as kt,a3 as Rt,a4 as yt,a5 as St,a6 as It,a7 as wt,a8 as bt,a9 as Pt,aa as At,ab as Ot,ac as Lt,ad as Dt,ae as Ct,af as Nt,ag as Ft,ah as Ie,ai as we,aj as be,ak as Vt}from"./vendor-BxNawP4f.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function o(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerPolicy&&(l.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?l.credentials="include":a.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(a){if(a.ep)return;a.ep=!0;const l=o(a);fetch(a.href,l)}})();const Ut="modulepreload",xt=function(e){return"/"+e},de={},c=function(t,o,s){let a=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const u=document.querySelector("meta[property=csp-nonce]"),f=(u==null?void 0:u.nonce)||(u==null?void 0:u.getAttribute("nonce"));a=Promise.allSettled(o.map(v=>{if(v=xt(v),v in de)return;de[v]=!0;const g=v.endsWith(".css"),i=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${v}"]${i}`))return;const d=document.createElement("link");if(d.rel=g?"stylesheet":Ut,g||(d.as="script"),d.crossOrigin="",d.href=v,f&&d.setAttribute("nonce",f),document.head.appendChild(d),g)return new Promise((p,k)=>{d.addEventListener("load",p),d.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${v}`)))})}))}function l(u){const f=new Event("vite:preloadError",{cancelable:!0});if(f.payload=u,window.dispatchEvent(f),!f.defaultPrevented)throw u}return a.then(u=>{for(const f of u||[])f.status==="rejected"&&l(f.reason);return t().catch(l)})},$t=(e,t,o)=>{const s=e[t];return s?typeof s=="function"?s():Promise.resolve(s):new Promise((a,l)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(l.bind(null,new Error("Unknown variable dynamic import: "+t+(t.split("/").length!==o?". Note that variables only represent file names one level deep.":""))))})};class zt{constructor(t="app_"){ee(this,"prefix");this.prefix=t}getKey(t){return`${this.prefix}${t}`}get(t){const o=localStorage.getItem(this.getKey(t));if(o)try{return JSON.parse(o)}catch{return null}return null}set(t,o){localStorage.setItem(this.getKey(t),JSON.stringify(o))}remove(t){localStorage.removeItem(this.getKey(t))}clear(){localStorage.clear()}}const R=new zt,Pe={common:{confirm:"确认",cancel:"取消",save:"保存",delete:"删除",edit:"编辑",create:"创建",search:"搜索",reset:"重置",back:"返回",more:"更多",loading:"加载中...",noData:"暂无数据",success:"操作成功",error:"操作失败",required:"必填项"},auth:{login:"登录",logout:"退出登录",register:"注册",forgotPassword:"忘记密码",username:"用户名",password:"密码",confirmPassword:"确认密码",email:"邮箱",phone:"手机号",rememberMe:"记住我",loginSuccess:"登录成功",loginError:"登录失败",logoutSuccess:"退出成功",logoutError:"退出失败"},menu:{home:"首页",dashboard:"仪表盘",system:"系统管理",user:"用户管理",role:"角色管理",permission:"权限管理",menu:"菜单管理",settings:"系统设置"},settings:{title:"系统设置",theme:"主题设置",language:"语言设置",notification:"通知设置",profile:"个人信息",security:"安全设置"},theme:{light:"浅色主题",dark:"深色主题",system:"跟随系统"},validation:{required:"{field}不能为空",email:"请输入正确的邮箱地址",phone:"请输入正确的手机号",password:"密码长度必须在6-20位之间",confirmPassword:"两次输入的密码不一致"},error:{403:"抱歉，您无权访问此页面",404:"抱歉，您访问的页面不存在",500:"抱歉，服务器出错了",network:"网络连接失败，请检查您的网络",unknown:"未知错误"}},Mt=Object.freeze(Object.defineProperty({__proto__:null,default:Pe},Symbol.toStringTag,{value:"Module"})),Ae={common:{confirm:"Confirm",cancel:"Cancel",save:"Save",delete:"Delete",edit:"Edit",create:"Create",search:"Search",reset:"Reset",back:"Back",more:"More",loading:"Loading...",noData:"No Data",success:"Operation Successful",error:"Operation Failed",required:"Required"},auth:{login:"Login",logout:"Logout",register:"Register",forgotPassword:"Forgot Password",username:"Username",password:"Password",confirmPassword:"Confirm Password",email:"Email",phone:"Phone",rememberMe:"Remember Me",loginSuccess:"Login Successful",loginError:"Login Failed",logoutSuccess:"Logout Successful",logoutError:"Logout Failed"},menu:{home:"Home",dashboard:"Dashboard",system:"System",user:"Users",role:"Roles",permission:"Permissions",menu:"Menu",settings:"Settings"},settings:{title:"Settings",theme:"Theme",language:"Language",notification:"Notifications",profile:"Profile",security:"Security"},theme:{light:"Light",dark:"Dark",system:"System"},validation:{required:"{field} is required",email:"Please enter a valid email address",phone:"Please enter a valid phone number",password:"Password must be between 6-20 characters",confirmPassword:"Passwords do not match"},error:{403:"Sorry, you are not authorized to access this page",404:"Sorry, the page you visited does not exist",500:"Sorry, something went wrong on the server",network:"Network connection failed, please check your network",unknown:"Unknown Error"}},Ht=Object.freeze(Object.defineProperty({__proto__:null,default:Ae},Symbol.toStringTag,{value:"Module"})),qt={"zh-CN":Pe,"en-US":Ae},Oe="locale",me="zh-CN",W=He({legacy:!1,locale:R.get(Oe)||me,fallbackLocale:me,messages:qt});function J(e){var t;W.global.locale.value=e,R.set(Oe,e),(t=document.querySelector("html"))==null||t.setAttribute("lang",e)}async function pe(e){if(W.global.availableLocales.includes(e)){J(e);return}try{const t=await $t(Object.assign({"./locales/de-DE.ts":()=>c(()=>import("./de-DE-s0OLlPSg.js"),[]),"./locales/en-US.ts":()=>c(()=>Promise.resolve().then(()=>Ht),void 0),"./locales/fr-FR.ts":()=>c(()=>import("./fr-FR-D2KP_l0B.js"),[]),"./locales/ja-JP.ts":()=>c(()=>import("./ja-JP-brfV3MIe.js"),[]),"./locales/ko-KR.ts":()=>c(()=>import("./ko-KR-BpHQvqPR.js"),[]),"./locales/zh-CN.ts":()=>c(()=>Promise.resolve().then(()=>Mt),void 0),"./locales/zh-TW.ts":()=>c(()=>import("./zh-TW-bVzB54I0.js"),[])}),`./locales/${e.replace("_","-")}.ts`,3);W.global.setLocaleMessage(e,t.default),J(e)}catch(t){console.error(`Failed to load locale messages for ${e}`,t)}}function Bt(e){e.use(W)}const jt="http://localhost:8000",G={CSRF_HEADER:"X-CSRFToken",CSRF_COOKIE:"csrftoken",ENCRYPTION_KEY:"your-encryption-key",SENSITIVE_FIELDS:["password","token","secret"]},Le={headers:{"Content-Type":"application/json",Accept:"application/json","X-Requested-With":"XMLHttpRequest"}};function De(){const e=localStorage.getItem("access_token");return e?{Authorization:`Bearer ${e}`}:{}}let fe={baseURL:jt,timeout:15e3,headers:Object.assign({},Le.headers,De()),withCredentials:!0};function Kt(){return fe.headers=Object.assign({},Le.headers,De()),fe}const Yt=async e=>(await ie("/api/v1/users/token/",e)).data,Wt=async()=>(await no("/api/v1/users/me/")).data,Ko=async(e,t)=>(await ie(`/api/v1/users/users/${e}/change_password/`,t)).data,Ce=async e=>(await ie("/api/v1/users/token/refresh/",{refresh:e})).data;var Ne=(e=>(e.DEBUG="DEBUG",e.INFO="INFO",e.WARN="WARN",e.ERROR="ERROR",e))(Ne||{});class Jt{constructor(t={}){ee(this,"config");this.config={level:"INFO",prefix:"",enableTimestamp:!0,enableConsole:!0,...t}}shouldLog(t){const o=Object.values(Ne),s=o.indexOf(this.config.level);return o.indexOf(t)>=s}formatMessage(t,o){const s=[];return this.config.enableTimestamp&&s.push(new Date().toISOString()),this.config.prefix&&s.push(this.config.prefix),s.push(`[${t}]`),s.push(o),s.join(" ")}log(t,o,...s){if(!this.shouldLog(t))return;const a=this.formatMessage(t,o);if(this.config.customHandler){this.config.customHandler(t,a,...s);return}if(this.config.enableConsole)switch(t){case"DEBUG":console.debug(a,...s);break;case"INFO":console.info(a,...s);break;case"WARN":console.warn(a,...s);break;case"ERROR":console.error(a,...s);break}}debug(t,...o){this.log("DEBUG",t,...o)}info(t,...o){this.log("INFO",t,...o)}warn(t,...o){this.log("WARN",t,...o)}error(t,...o){this.log("ERROR",t,...o)}setConfig(t){this.config={...this.config,...t}}getConfig(){return{...this.config}}}const I=new Jt({prefix:"APP",level:"INFO"}),he=7200,Gt={id:"",username:"",nickname:"",email:"",avatar:"",permissions:[],roles:[],lastLogin:"",status:1},_e={userInfo:null,permissions:[]},A={refreshTokenHandler:async function(){return this.isRefreshing&&this.refreshPromise?this.refreshPromise:(this.isRefreshing=!0,this.refreshPromise=new Promise(async(e,t)=>{try{if(!this.refreshToken)throw new Error("Refresh token is missing");const o=await Ce(this.refreshToken),s=o.access,a=o.refresh||this.refreshToken,l=o.expires_in||he;this.token=s,this.refreshToken=a,this.tokenExpireTime=Date.now()+l*1e3,I.info("Token refreshed successfully"),e(s)}catch(o){I.error("Failed to refresh token:",o),this.logout(),t(o)}finally{this.isRefreshing=!1,this.refreshPromise=null}}),this.refreshPromise)},loginAction:async function(e,t){try{const s=await Yt({username:e,password:t}),a=s.token,l=s.refresh,u=s.expires_in,f=s.user;return this.token=a,this.refreshToken=l,this.tokenExpireTime=Date.now()+u*1e3,this.userInfo=f,localStorage.setItem("access_token",a),localStorage.setItem("refresh_token",l),localStorage.setItem("token_expire_time",(Date.now()+u*1e3).toString()),localStorage.setItem("user_info",JSON.stringify(f)),this.startTokenRefreshTimer(),I.info("User logged in:",e),f}catch(o){throw I.error("Login failed:",o),o}},logout:async function(){this.token="",this.refreshToken="",this.tokenExpireTime=0,this.userInfo=null,localStorage.removeItem("access_token"),localStorage.removeItem("refresh_token"),localStorage.removeItem("token_expire_time"),localStorage.removeItem("user_info"),this.stopTokenRefreshTimer(),I.info("User logged out")},initialize:async function(){if(this.token&&this.refreshToken){const e=Date.now();if(this.tokenExpireTime<=e)try{await this.refreshTokenHandler(),await this.refreshUserInfo()}catch(t){I.error("Failed to initialize user session:",t),this.logout();return}else if(this.tokenExpireTime-e<(he-300)*1e3)try{await this.refreshUserInfo()}catch(t){I.error("Failed to refresh user info during initialization:",t)}this.startTokenRefreshTimer(),I.info("User session initialized")}else this.setDefaultUserInfo()},refreshUserInfo:async function(){const e=await Wt();return this.userInfo=e,this.permissions=e.permissions||[],I.info("User info refreshed"),e},setDefaultUserInfo:function(){this.userInfo=Gt},hasPermission:function(e){return this.permissions.includes(e)},hasRole:function(e){var t,o;return((o=(t=this.userInfo)==null?void 0:t.roles)==null?void 0:o.includes(e))||!1}},O="access_token",B="user_info",Xt=25*60*1e3,Qt="user_roles",ge="/auth/login",Zt=["/auth/login","/auth/register","/404","/403","/500"],N=re("user",()=>{const e=localStorage.getItem(O),t=S(e||R.get(O)),o=S(null),s=localStorage.getItem(B);let a=null;if(s)try{a=JSON.parse(s)}catch(i){console.error("解析用户信息失败:",i)}const l=S(a||_e.userInfo),u=S(_e.permissions),f=C(()=>!!t.value),v=()=>{o.value&&clearInterval(o.value),o.value=setInterval(async()=>{try{if(!t.value)throw new Error("No refresh token available");const i=await Ce(t.value);i!=null&&i.access&&(t.value=i.access,localStorage.setItem(O,i.access),R.set(O,i.access))}catch(i){console.error("Token refresh failed:",i),g(),localStorage.removeItem(O),t.value=""}},Xt)},g=()=>{o.value&&(clearInterval(o.value),o.value=null)};return{token:t,userInfo:l,permissions:u,isLoggedIn:f,login:async(i,d)=>{const p=await A.loginAction(i,d);return localStorage.setItem(B,JSON.stringify(p)),p},logout:()=>{localStorage.removeItem(B),localStorage.removeItem(O),localStorage.removeItem(Qt),R.remove(O),R.remove(B),A.logout()},startTokenRefresh:v,clearTokenRefresh:g,refreshTokenHandler:A.refreshTokenHandler,loginAction:A.loginAction,initialize:A.initialize,refreshUserInfo:A.refreshUserInfo,setDefaultUserInfo:A.setDefaultUserInfo,hasPermission:A.hasPermission,hasRole:A.hasRole}});let te=null;const Ee=new Map,j={ROTATION_INTERVAL:15*60*1e3,REFRESH_THRESHOLD:5*60*1e3,MAX_REFRESH_RETRIES:3,REFRESH_RETRY_DELAY:1e3,TOKEN_TYPES:{ACCESS:"access_token",REFRESH:"refresh_token",ROTATION:"rotation_token"}},eo={refreshPromise:null,refreshRetries:0,rotationTimer:null,initTokenRotation(){this.rotationTimer&&clearInterval(this.rotationTimer),this.rotationTimer=window.setInterval(()=>{this.rotateToken()},j.ROTATION_INTERVAL)},async rotateToken(){const e=F();if(e.token.value)try{const t=await fetch("/api/auth/rotate",{method:"POST",headers:{Authorization:`Bearer ${e.token.value}`,"Content-Type":"application/json"}});if(t.ok){const{token:o}=await t.json();e.setToken(o)}}catch(t){console.error("Token rotation failed:",t)}},async refreshToken(){const e=F();return this.refreshPromise?this.refreshPromise:(this.refreshPromise=new Promise(async(t,o)=>{try{if(this.refreshRetries>=j.MAX_REFRESH_RETRIES){e.logout(),o(new Error("Token refresh failed after max retries"));return}const s=await e.refreshTokenHandler();this.refreshRetries=0,t(s)}catch(s){this.refreshRetries++,await new Promise(a=>setTimeout(a,j.REFRESH_RETRY_DELAY*this.refreshRetries)),o(s)}finally{this.refreshPromise=null}}),this.refreshPromise)},shouldRefreshToken(){const e=F();if(!e.token.value)return!1;const t=this.parseToken(e.token.value);return t?t.exp*1e3-Date.now()<j.REFRESH_THRESHOLD:!1},parseToken(e){try{const o=e.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),s=decodeURIComponent(atob(o).split("").map(a=>"%"+("00"+a.charCodeAt(0).toString(16)).slice(-2)).join(""));return JSON.parse(s)}catch(t){return console.error("Token parsing failed:",t),null}},cleanup(){this.rotationTimer&&(clearInterval(this.rotationTimer),this.rotationTimer=null),this.refreshPromise=null,this.refreshRetries=0}},to=()=>{console.log("正在尝试获取CSRF token...");const e=document.cookie.split(";"),t=["csrftoken","csrf_token","CSRF_TOKEN","XSRF-TOKEN"];console.log("当前cookies:",document.cookie);for(const s of e){const[a,l]=s.trim().split("=");if(t.includes(a))return console.log(`从cookie中获取到CSRF token (${a}):`,l),l}const o=document.querySelector('meta[name="csrf-token"]');if(o){const s=o.getAttribute("content");if(s)return console.log("从meta标签获取到CSRF token:",s),s}return console.warn("无法获取CSRF token，将尝试从服务器获取"),""},Fe=e=>{if(!e)return e;if(typeof e=="object"){const t={...e};for(const o in t)G.SENSITIVE_FIELDS.includes(o)?t[o]=se.AES.encrypt(JSON.stringify(t[o]),G.ENCRYPTION_KEY).toString():typeof t[o]=="object"&&(t[o]=Fe(t[o]));return t}return e},Ve=e=>{if(!e)return e;if(typeof e=="object"){const t={...e};for(const o in t)if(G.SENSITIVE_FIELDS.includes(o))try{const s=se.AES.decrypt(t[o],G.ENCRYPTION_KEY);t[o]=JSON.parse(s.toString(se.enc.Utf8))}catch(s){console.error("解密失败:",s)}else typeof t[o]=="object"&&(t[o]=Ve(t[o]));return t}return e},oo=()=>{const e=Date.now();for(const[t,o]of Ee.entries())e-o.timestamp>o.ttl&&Ee.delete(t)};setInterval(oo,60*1e3);`${Date.now()}${Math.random().toString(36).substr(2,9)}`;const F=()=>{if(!te){const e=N();te={token:S(e.token),setToken:t=>e.token=t,refreshTokenHandler:e.refreshTokenHandler,logout:e.logout}}return te},so=()=>{F().token.value&&eo.initTokenRotation()};setTimeout(so,0);const L=Te.create({...Kt(),withCredentials:!0});L.interceptors.request.use(async e=>{var o;if(((o=e.method)==null?void 0:o.toLowerCase())!=="get"){let s=to();if(!s&&e.headers)try{console.log("尝试从服务器获取CSRF token");const a=await Te.get("/api/v1/auth/csrf/",{withCredentials:!0});a.data&&a.data.csrf_token&&(s=a.data.csrf_token,console.log("从服务器获取到CSRF token:",s),document.cookie=`csrftoken=${s}; path=/`)}catch(a){console.error("获取CSRF token失败:",a)}s&&e.headers?(e.headers["X-CSRFToken"]=s,e.headers["X-CSRF-TOKEN"]=s,e.headers.csrftoken=s,console.log("添加CSRF token到请求头:",s),console.log("当前请求方法:",e.method)):console.warn("无法添加CSRF token到请求头")}const t=localStorage.getItem("access_token");if(console.log("从localStorage获取的access_token:",t?"已获取":"未获取"),t&&e.headers)e.headers.Authorization=`Bearer ${t}`,console.log("已添加Authorization头部");else{const a=F().token.value;a&&e.headers?(e.headers.Authorization=`Bearer ${a}`,console.log("从userStore获取token并添加Authorization头部")):console.warn("无法添加Authorization头部，token不存在")}return e.withCredentials=!0,e.data&&(e.data=Fe(e.data)),e},e=>Promise.reject(e));L.interceptors.response.use(e=>(e.data&&(e.data=Ve(e.data)),e),async e=>{var t,o;if(((t=e.response)==null?void 0:t.status)===401){const s=F(),a=((o=e.config)==null?void 0:o.url)||"";if(a.includes("/api/v1/postcodes/"))return console.warn("Authentication required for API:",a),Promise.resolve({data:{results:[],count:0}});try{await s.refreshTokenHandler();const l=e.config;if(l)return L(l)}catch(l){if(console.error("Token refresh failed:",l),a.includes("/api/v1/"))return console.warn("Returning empty data for API:",a),Promise.resolve({data:{results:[],count:0}})}}return Promise.reject(e)});const{get:no,post:ie,put:Yo,delete:Wo}=L,ro={DATE_FORMATS:{short:{year:"numeric",month:"2-digit",day:"2-digit"},long:{year:"numeric",month:"long",day:"numeric",weekday:"long"},time:{hour:"2-digit",minute:"2-digit",second:"2-digit"}}},ao={animationsEnabled:!0,compactMode:!1,showHelpIcons:!0,sidebarCollapsed:!1,tableRowsPerPage:10,tableSize:"default"},io={enabled:!0,sound:!0,desktop:!0,enableEmailNotifications:!1},X=re("settings",()=>{const e=U("freight-theme","auto"),t=qe(),o=C(()=>e.value==="auto"?t.value?"dark":"light":e.value),s=U("freight-language","zh-CN"),a=U("freight-ui-settings",ao),l=U("freight-notification-settings",io),u=U("freight-guides-completed",[]),f=S(new Map),v=Be(),g=C(()=>v.isOnline.value),i=S(!1),d=S(0),p=S([]),k=S(!1),b=async()=>{e.value=o.value==="light"?"dark":"light",await Q()},Q=async()=>{document.documentElement.classList.add("theme-transition"),document.documentElement.setAttribute("data-theme",o.value),await Ke(),document.documentElement.classList.remove("theme-transition")},M=async m=>{try{await pe(m),J(m),s.value=m,K.success(`语言已切换到${m}`)}catch(h){K.error(`切换语言失败: ${h}`)}},H=(m,h="short")=>{const T=new Date(m);return new Intl.DateTimeFormat(s.value,ro.DATE_FORMATS[h]).format(T)},P=(m,h)=>{f.value.set(m,h)},q=m=>f.value.get(m)||!1;je(o,m=>{document.documentElement.setAttribute("data-theme",m)},{immediate:!0});const $e=async()=>{P("settings",!0);try{return document.documentElement.setAttribute("data-theme",o.value),await ce(),s.value&&(await pe(s.value),J(s.value)),!0}catch(m){throw console.error("加载设置失败:",m),K.error("加载应用设置失败，请刷新页面重试"),m}finally{P("settings",!1)}},ce=async()=>{k.value=!0;try{const m=await L.get("/api/configs");p.value=m.data}catch(m){throw console.error("获取配置失败:",m),m}finally{k.value=!1}};return{theme:e,language:s,uiSettings:a,notificationSettings:l,guidesCompleted:u,isOnline:g,isReconnecting:i,reconnectAttempts:d,actualTheme:o,toggleTheme:b,updateLanguage:M,formatDate:H,setLoading:P,isLoading:q,loadSettings:$e,configs:p,configLoading:k,fetchConfigs:ce,addConfig:async m=>{try{const h=await L.post("/api/configs",m);return p.value.push(h.data),h.data}catch(h){throw console.error("添加配置失败:",h),h}},updateConfig:async(m,h)=>{try{const T=await L.put(`/api/configs/${m}`,h),V=p.value.findIndex(Z=>Z.id===m);return V!==-1&&(p.value[V]=T.data),T.data}catch(T){throw console.error("更新配置失败:",T),T}},deleteConfig:async m=>{try{await L.delete(`/api/configs/${m}`);const h=p.value.findIndex(T=>T.id===m);h!==-1&&p.value.splice(h,1)}catch(h){throw console.error("删除配置失败:",h),h}},getConfigValue:m=>{const h=p.value.find(T=>T.key===m);return h==null?void 0:h.value},batchUpdateConfigs:async m=>{try{const h=await L.put("/api/configs/batch",{updates:m});return m.forEach(T=>{const V=p.value.find(Z=>Z.id===T.id);V&&(V.value=T.value)}),h.data}catch(h){throw console.error("批量更新配置失败:",h),h}}}}),lo=z({__name:"ThemeProvider",props:{enableTransition:{type:Boolean,default:!0}},setup(e){const t=X(),o=C(()=>t.currentTheme);return ae(()=>{document.documentElement.classList.toggle("dark",o.value==="dark")}),(s,a)=>(D(),Y("div",{class:ke(["theme-provider",[`theme-${o.value}`,{"theme-transition":s.enableTransition}]])},[ne(s.$slots,"default")],2))}}),Ue=z({__name:"App",setup(e){const t=X(),o=C(()=>t.language==="zh-CN"?Ye:We);return ae(async()=>{if(await t.loadSettings(),console.log("应用启动，初始化认证状态..."),localStorage.getItem(O)){console.log("发现有效的token，初始化用户状态");const a=N();a.isLoggedIn&&(console.log("用户已登录，启动token刷新机制"),a.startTokenRefresh())}else console.log("未找到有效的token")}),(s,a)=>{const l=Re("router-view");return D(),x(_(Je),{locale:o.value},{default:r(()=>[n(lo,null,{default:r(()=>[n(l)]),_:1})]),_:1},8,["locale"])}}}),oe=re("app",{state:()=>({theme:R.get("theme")??"light",sidebar:{collapsed:R.get("sidebar_collapsed")??!1,width:240},device:"desktop",loading:!1,error:null}),getters:{isDarkTheme:e=>e.theme==="dark",isMobile:e=>e.device==="mobile",sidebarWidth:e=>e.sidebar.collapsed?64:e.sidebar.width},actions:{setTheme(e){this.theme=e,R.set("theme",e),document.documentElement.classList.toggle("dark",e==="dark")},toggleTheme(){this.setTheme(this.theme==="light"?"dark":"light")},toggleSidebar(){this.sidebar.collapsed=!this.sidebar.collapsed,R.set("sidebar_collapsed",this.sidebar.collapsed)},setDevice(e){this.device=e},setLoading(e){this.loading=e},setError(e){this.error=e},handleResize(){const e=window.innerWidth;e<768?(this.setDevice("mobile"),this.sidebar.collapsed=!0):e<992?(this.setDevice("tablet"),this.sidebar.collapsed=!0):(this.setDevice("desktop"),this.sidebar.collapsed=!1)},init(){const e=R.get("theme")??"light";this.setTheme(e);const t=R.get("sidebar_collapsed")??!1;this.sidebar.collapsed=t,this.handleResize(),window.addEventListener("resize",this.handleResize)},cleanup(){window.removeEventListener("resize",this.handleResize)}}}),co=new Set(Zt),ve=new Map;function xe(e){e.beforeEach(async(t,o,s)=>{const a=performance.now();N();const l=oe();console.log("路由守卫处理:",o.path,"->",t.path),l.setLoading(!0);try{if(co.has(t.path)||t.meta.public){console.log("白名单或公开路由，直接通过:",t.path),s();return}const u=localStorage.getItem(O);if(console.log("检查到token:",u?"已登录":"未登录"),!u){console.log("未检测到token，重定向到登录页"),s({path:ge,query:{redirect:t.fullPath},replace:!0});return}if(t.path===ge){const f=o.query.redirect||"/";console.log("已登录用户访问登录页，重定向到:",f),s(typeof f=="string"?f:"/");return}s()}catch(u){console.error("路由守卫出错:",u),s({path:"/500"})}finally{const u=performance.now();console.log(`路由守卫执行完成，耗时: ${(u-a).toFixed(2)}ms`),l.setLoading(!1)}}),e.afterEach(t=>{const o=oe(),s=t.meta.title;s&&(document.title=`${s} - 物流运费订单计算系统`),o.isMobile&&!o.sidebar.collapsed&&o.toggleSidebar(),ve.size>100&&ve.clear()}),e.onError(t=>{I.error("Route error",{error:t});const o=oe();o.setError(t),o.setLoading(!1)})}const uo={class:"app-header__left"},mo={class:"app-header__right"},po={class:"user-info"},fo={class:"username"},ho=z({__name:"AppHeader",props:{username:{default:""},avatar:{default:""},isCollapsed:{type:Boolean,default:!1}},emits:["toggle-sidebar","command"],setup(e){const t=X(),o=C(()=>t.currentTheme==="dark"),s=()=>{t.toggleTheme()},a=l=>{t.updateLanguage(l)};return(l,u)=>{const f=Ge,v=ye,g=Ze,i=Qe,d=Xe,p=ot,k=st;return D(),x(k,{class:"app-header"},{default:r(()=>[y("div",uo,[n(f,{class:"app-header__collapse-btn",icon:l.isCollapsed?"Expand":"Fold",onClick:u[0]||(u[0]=b=>l.$emit("toggle-sidebar"))},null,8,["icon"]),u[2]||(u[2]=y("div",{class:"app-header__logo"},[y("span",{class:"logo-text"},"运费计算系统")],-1))]),y("div",mo,[n(d,{trigger:"click",onCommand:a},{dropdown:r(()=>[n(i,null,{default:r(()=>[n(g,{command:"zh-CN"},{default:r(()=>u[3]||(u[3]=[E("简体中文")])),_:1}),n(g,{command:"en-US"},{default:r(()=>u[4]||(u[4]=[E("English")])),_:1})]),_:1})]),default:r(()=>[n(f,{class:"language-btn"},{default:r(()=>[n(v,null,{default:r(()=>[n(_(Se))]),_:1})]),_:1})]),_:1}),n(f,{class:"theme-btn",onClick:s},{default:r(()=>[n(v,null,{default:r(()=>[o.value?(D(),x(_(et),{key:0})):(D(),x(_(tt),{key:1}))]),_:1})]),_:1}),n(d,{trigger:"click",onCommand:u[1]||(u[1]=b=>l.$emit("command",b))},{dropdown:r(()=>[n(i,null,{default:r(()=>[n(g,{command:"profile"},{default:r(()=>u[5]||(u[5]=[E("个人资料")])),_:1}),n(g,{command:"settings"},{default:r(()=>u[6]||(u[6]=[E("系统设置")])),_:1}),n(g,{divided:"",command:"logout"},{default:r(()=>u[7]||(u[7]=[E("退出登录")])),_:1})]),_:1})]),default:r(()=>[y("div",po,[n(p,{size:32,src:l.avatar},{default:r(()=>{var b;return[E(ue((b=l.username)==null?void 0:b.charAt(0)),1)]}),_:1},8,["src"]),y("span",fo,ue(l.username),1)])]),_:1})])]),_:1})}}}),le=(e,t)=>{const o=e.__vccOpts||e;for(const[s,a]of t)o[s]=a;return o},_o=le(ho,[["__scopeId","data-v-7ca4a0af"]]),go={key:0,class:"app-sidebar__footer"},Eo=z({__name:"AppSidebar",props:{collapsed:{type:Boolean,default:!1},activeMenu:{default:""},uniqueOpened:{type:Boolean,default:!0},collapseTransition:{type:Boolean,default:!0},router:{type:Boolean,default:!0}},setup(e){return(t,o)=>{const s=rt;return D(),Y("aside",{class:ke(["app-sidebar",{"is-collapsed":t.collapsed}])},[n(s,{"default-active":t.activeMenu,collapse:t.collapsed,"unique-opened":t.uniqueOpened,"collapse-transition":t.collapseTransition,router:t.router,class:"app-sidebar__menu"},{default:r(()=>[ne(t.$slots,"default",{},void 0,!0)]),_:3},8,["default-active","collapse","unique-opened","collapse-transition","router"]),t.$slots.footer?(D(),Y("div",go,[ne(t.$slots,"footer",{},void 0,!0)])):nt("",!0)],2)}}}),vo=le(Eo,[["__scopeId","data-v-0732dc09"]]),To={class:"layout-default"},ko=z({__name:"default",setup(e){const t=at(),o=it(),s=N();ae(async()=>{await s.initialize(),s.isLoggedIn||t.push("/auth/login")});const a=S(!1),l=C(()=>o.path),u=C(()=>a.value?"var(--sidebar-collapsed-width)":"var(--sidebar-width)"),f=()=>{var i,d;const g=(d=(i=s.userInfo)==null?void 0:i.roles)!=null&&d.includes("admin")?"/admin/dashboard":"/dashboard";t.push(g)},v=async g=>{if(console.log("接收到命令:",g),g==="logout")try{await Ct.confirm("确定要退出登录吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}),console.log("用户确认登出"),await s.logout(),K.success("已成功退出登录"),console.log("强制跳转到登录页"),window.location.href=`${window.location.origin}/auth/login`}catch(i){console.log("用户取消登出或发生错误:",i)}else g==="profile"?t.push("/system/profile"):g==="settings"&&t.push("/system/settings")};return(g,i)=>{const d=ye,p=ct,k=dt,b=Re("router-view"),Q=Ot,M=lt;return D(),Y("div",To,[n(M,{class:"layout-container"},{default:r(()=>{var H;return[n(_(_o),{username:(H=_(s).userInfo)==null?void 0:H.username,"is-collapsed":a.value,onToggleSidebar:i[0]||(i[0]=P=>a.value=!a.value),onCommand:v},null,8,["username","is-collapsed"]),n(M,{class:"main-container"},{default:r(()=>[n(_(vo),{width:u.value,"is-collapsed":a.value,"active-menu":l.value},{default:r(()=>{var P,q;return[n(p,{index:(q=(P=_(s).userInfo)==null?void 0:P.roles)!=null&&q.includes("admin")?"/admin/dashboard":"/dashboard",onClick:f},{title:r(()=>i[1]||(i[1]=[E("仪表盘")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(ut))]),_:1})]),_:1},8,["index"]),n(k,{index:"/calculator"},{title:r(()=>[n(d,null,{default:r(()=>[n(_(ft))]),_:1}),i[2]||(i[2]=y("span",null,"运费计算",-1))]),default:r(()=>[n(p,{index:"/calculator/single"},{title:r(()=>i[3]||(i[3]=[E("单票计算")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(mt))]),_:1})]),_:1}),n(p,{index:"/calculator/batch"},{title:r(()=>i[4]||(i[4]=[E("批量计算")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(pt))]),_:1})]),_:1})]),_:1}),n(k,{index:"/product"},{title:r(()=>[n(d,null,{default:r(()=>[n(_(_t))]),_:1}),i[5]||(i[5]=y("span",null,"产品管理",-1))]),default:r(()=>[n(p,{index:"/product/list"},{title:r(()=>i[6]||(i[6]=[E("产品列表")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(ht))]),_:1})]),_:1})]),_:1}),n(p,{index:"/fuel-rate"},{title:r(()=>i[7]||(i[7]=[E("燃油费率")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(gt))]),_:1})]),_:1}),n(k,{index:"/postal"},{title:r(()=>[n(d,null,{default:r(()=>[n(_(kt))]),_:1}),i[8]||(i[8]=y("span",null,"邮编管理",-1))]),default:r(()=>[n(p,{index:"/postal/codes"},{title:r(()=>i[9]||(i[9]=[E("分区设置")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(Et))]),_:1})]),_:1}),n(p,{index:"/postal/areas"},{title:r(()=>i[10]||(i[10]=[E("偏远地区")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(vt))]),_:1})]),_:1}),n(p,{index:"/postal"},{title:r(()=>i[11]||(i[11]=[E("数据导入")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(Tt))]),_:1})]),_:1})]),_:1}),n(k,{index:"/report"},{title:r(()=>[n(d,null,{default:r(()=>[n(_(It))]),_:1}),i[12]||(i[12]=y("span",null,"报表分析",-1))]),default:r(()=>[n(p,{index:"/report/usage"},{title:r(()=>i[13]||(i[13]=[E("使用统计")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(Rt))]),_:1})]),_:1}),n(p,{index:"/report/cost"},{title:r(()=>i[14]||(i[14]=[E("成本分析")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(yt))]),_:1})]),_:1}),n(p,{index:"/report/export"},{title:r(()=>i[15]||(i[15]=[E("数据导出")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(St))]),_:1})]),_:1})]),_:1}),n(k,{index:"/system"},{title:r(()=>[n(d,null,{default:r(()=>[n(_(Se))]),_:1}),i[16]||(i[16]=y("span",null,"系统管理",-1))]),default:r(()=>[n(p,{index:"/system/user"},{title:r(()=>i[17]||(i[17]=[E("用户管理")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(wt))]),_:1})]),_:1}),n(p,{index:"/system/role"},{title:r(()=>i[18]||(i[18]=[E("角色权限")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(bt))]),_:1})]),_:1}),n(p,{index:"/system/log"},{title:r(()=>i[19]||(i[19]=[E("操作日志")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(Pt))]),_:1})]),_:1}),n(p,{index:"/system/data-sync"},{title:r(()=>i[20]||(i[20]=[E("数据同步")])),default:r(()=>[n(d,null,{default:r(()=>[n(_(At))]),_:1})]),_:1})]),_:1})]}),_:1},8,["width","is-collapsed","active-menu"]),n(Q,{class:"main"},{default:r(()=>[n(b,null,{default:r(({Component:P})=>[n(Lt,{name:"fade",mode:"out-in"},{default:r(()=>[(D(),x(Dt(P)))]),_:2},1024)]),_:1})]),_:1})]),_:1})]}),_:1})])}}}),w=le(ko,[["__scopeId","data-v-ab7e7f44"]]),Ro=[{path:"/",component:w,meta:{title:"首页"},children:[{path:"",name:"Home",component:()=>c(()=>import("./dashboard-CETISQqx.js"),__vite__mapDeps([0,1,2,3])),meta:{title:"棣栭〉",icon:"home",public:!0}}]},{path:"/test",name:"TestPage",component:()=>c(()=>import("./TestPage-g32Q9rm3.js"),__vite__mapDeps([4,1,2,5])),meta:{title:"测试页面",public:!0,requiresAuth:!1}},{path:"/404",name:"NotFound",component:()=>c(()=>import("./404-jnfAsSbU.js"),__vite__mapDeps([6,1,2,7])),meta:{title:"页面未找到",public:!0}},{path:"/403",name:"Forbidden",component:()=>c(()=>import("./403-C_oEEruu.js"),__vite__mapDeps([8,1,2,9])),meta:{title:"没有权限",public:!0}},{path:"/500",name:"ServerError",component:()=>c(()=>import("./500-ChjANSFt.js"),__vite__mapDeps([10,1,2,11])),meta:{title:"服务器错误",public:!0}},{path:"/:pathMatch(.*)*",redirect:"/404"}],yo=[{path:"/auth",component:()=>c(()=>import("./auth-ByGfzCuM.js"),__vite__mapDeps([12,1,2,13])),meta:{public:!0},children:[{path:"login",name:"Login",component:()=>c(()=>import("./login-CSXs83Nb.js"),__vite__mapDeps([14,1,2,15,16])),meta:{title:"登录",public:!0}},{path:"register",name:"Register",component:()=>c(()=>import("./register-Yjzr85HM.js"),__vite__mapDeps([17,1,2,18])),meta:{title:"注册",public:!0}},{path:"forgot-password",name:"ForgotPassword",component:()=>c(()=>import("./forgot-password-BTSg3D_4.js"),__vite__mapDeps([19,1,2,15,20])),meta:{title:"忘记密码",public:!0}},{path:"reset-password/:uid/:token",name:"ResetPassword",component:()=>c(()=>import("./reset-password-CSXnGeo2.js"),__vite__mapDeps([21,1,2,15,22])),meta:{title:"重置密码",public:!0}}]}],So=[{path:"/",component:w,children:[{path:"dashboard",name:"Dashboard",component:()=>c(()=>import("./dashboard-CETISQqx.js"),__vite__mapDeps([0,1,2,3])),meta:{title:"仪表盘",requiresAuth:!0}}]}],Io=[{path:"/",component:w,children:[{path:"calculator",name:"Calculator",component:()=>c(()=>import("./index-_xIrNav-.js"),__vite__mapDeps([23,1,2,24,25,26,27])),meta:{title:"运费计算",icon:"calculator"}},{path:"calculator/single",name:"SingleCalc",component:()=>c(()=>import("./single-CED7AcLx.js"),__vite__mapDeps([28,1,2,29,30,26,31,32,33,27])),meta:{title:"单次计算"}},{path:"calculator/batch",name:"BatchCalc",component:()=>c(()=>import("./batch-ClyofT1X.js"),__vite__mapDeps([34,1,2,35,36,31,24,37])),meta:{title:"批量计算"}},{path:"calculator/compare",name:"Compare",component:()=>c(()=>import("./compare-DwbDriMQ.js"),__vite__mapDeps([38,1,2,31,29,30,26,35,24,39])),meta:{title:"产品比较"}},{path:"calculator/history",name:"History",component:()=>c(()=>import("./history-FgZ75WFq.js"),__vite__mapDeps([40,1,2,41,31,24,36,42,26,27])),meta:{title:"计算历史"}},{path:"calculator/history/:id",name:"HistoryDetail",component:()=>c(()=>import("./history-detail-kfLzjLaP.js"),__vite__mapDeps([43,1,2,41,32,44])),meta:{title:"历史详情"}}]}],wo=[{path:"/",component:w,children:[{path:"product",name:"Product",component:()=>c(()=>import("./index-CnygEL8S.js"),__vite__mapDeps([45,1,2,46])),meta:{title:"产品管理",icon:"box"}},{path:"product/list",name:"ProductList",component:()=>c(()=>import("./list-DTOWQ5sR.js"),__vite__mapDeps([47,1,2,24,48,49])),meta:{title:"产品列表"}},{path:"product/detail/:code",name:"ProductDetail",component:()=>c(()=>import("./detail-C3pBtLeK.js"),__vite__mapDeps([50,1,2,48,51,52])),meta:{title:"产品详情"}},{path:"product/edit/:code/:tab",name:"ProductEdit",component:()=>c(()=>import("./edit-B0xngtR1.js"),__vite__mapDeps([53,1,2,48,54,52])),meta:{title:"编辑产品"},props:!0}]}],bo=[{path:"/",component:w,children:[{path:"postal",name:"Postal",component:()=>c(()=>import("./index-CMw8piW4.js"),__vite__mapDeps([55,1,2,56,57,58,59,60])),meta:{title:"邮编管理",icon:"location"}},{path:"postal/codes",name:"PostalCodes",component:()=>c(()=>import("./codes-ClMAeQLv.js"),__vite__mapDeps([56,1,2,57])),meta:{title:"邮编列表"}},{path:"postal/areas",name:"ServiceAreas",component:()=>c(()=>import("./areas-8vIy3eNI.js"),__vite__mapDeps([58,1,2,59])),meta:{title:"服务区域"}}]}],Po=[{path:"/",component:w,children:[{path:"fuel-rate",name:"FuelRate",component:()=>c(()=>import("./index-B1SplW1F.js"),__vite__mapDeps([61,1,2,62])),meta:{title:"燃油费率",icon:"oil"}}]}],Ao=[{path:"/",component:w,children:[{path:"report",name:"Report",component:()=>c(()=>import("./index-CsQbHox1.js"),__vite__mapDeps([63,1,2,64,65,66])),meta:{title:"报表分析",icon:"chart"}},{path:"report/usage",name:"ReportUsage",component:()=>c(()=>import("./usage-otyygXu7.js"),__vite__mapDeps([67,1,2,64,65,68])),meta:{title:"使用统计"}},{path:"report/cost",name:"ReportCost",component:()=>c(()=>import("./cost-BQwsyqtA.js"),__vite__mapDeps([69,1,2,70])),meta:{title:"成本分析"}},{path:"report/export",name:"ReportExport",component:()=>c(()=>import("./export-D8MruO9f.js"),__vite__mapDeps([71,1,2,72])),meta:{title:"数据导出"}}]}],Oo=[{path:"/",component:w,children:[{path:"notification",name:"Notification",component:()=>c(()=>import("./index-ChHKNF81.js"),__vite__mapDeps([73,1,2,74,24,75])),meta:{title:"通知中心",icon:"notification"}},{path:"notification/settings",name:"NotificationSettings",component:()=>c(()=>import("./settings-DgjvTSen.js"),__vite__mapDeps([76,1,2,74,77])),meta:{title:"通知设置"}}]}],Lo=[{path:"/",component:w,children:[{path:"system",name:"System",component:()=>c(()=>import("./index-DBYcsz0B.js"),__vite__mapDeps([78,1,2,79])),meta:{title:"系统设置",icon:"setting"}},{path:"system/profile",name:"Profile",component:()=>c(()=>import("./profile-A2DlH_VW.js"),__vite__mapDeps([80,1,2,81])),meta:{title:"用户资料"}},{path:"system/settings",name:"Settings",component:()=>c(()=>import("./settings-DdlxIYRU.js"),__vite__mapDeps([82,1,2,83])),meta:{title:"系统设置"}}]}],Do=[{path:"/admin",component:w,meta:{requiresAuth:!0,roles:["admin"]},children:[{path:"dashboard",name:"AdminDashboard",component:()=>c(()=>import("./dashboard-BLJNojG0.js"),__vite__mapDeps([84,1,2,85])),meta:{title:"管理仪表盘",icon:"dashboard"}},{path:"users",name:"Users",component:()=>c(()=>import("./users-BVLfJ9dR.js"),__vite__mapDeps([86,1,2,24,87])),meta:{title:"用户管理",icon:"user"}},{path:"roles",name:"Roles",component:()=>c(()=>import("./roles-DjJnr_HT.js"),__vite__mapDeps([88,1,2,24,89])),meta:{title:"角色管理",icon:"user-filled"}},{path:"permissions",name:"Permissions",component:()=>c(()=>import("./permissions-BjEFApgg.js"),__vite__mapDeps([90,1,2,24,91])),meta:{title:"权限管理",icon:"lock"}},{path:"audit-logs",name:"AuditLogs",component:()=>c(()=>import("./audit-logs-CGnuUZhG.js"),__vite__mapDeps([92,1,2,24,93])),meta:{title:"审计日志",icon:"document"}},{path:"settings",name:"AdminSettings",component:()=>c(()=>import("./settings-oUiDS6xv.js"),__vite__mapDeps([94,1,2,95])),meta:{title:"系统设置",icon:"setting"}},{path:"backup",name:"AdminBackup",component:()=>c(()=>import("./backup-C8HjTwBC.js"),__vite__mapDeps([96,1,2,97])),meta:{title:"数据备份",icon:"download"}},{path:"monitor",name:"AdminMonitor",component:()=>c(()=>import("./monitor-3FBRhUED.js"),__vite__mapDeps([98,1,2,99])),meta:{title:"性能监控",icon:"monitor"}}]}],Co=[...Ro,...yo,...So,...Io,...wo,...bo,...Po,...Ao,...Oo,...Lo,...Do],$=Nt({history:Ft(),routes:Co});xe($);function No(e){const t=N();return(Array.isArray(e)?e:[e]).some(s=>t.hasPermission(s))}function Fo(e){const t=N();return(Array.isArray(e)?e:[e]).some(s=>t.hasRole(s))}const Vo={mounted(e,t){var s;No(t.value)||(s=e.parentNode)==null||s.removeChild(e)}},Uo={mounted(e,t){var s;Fo(t.value)||(s=e.parentNode)==null||s.removeChild(e)}},xo=async()=>{const e=Ie(Ue),t=we();e.use(t),e.use(be);for(const[o,s]of Object.entries(Vt))e.component(o,s);Bt(e);try{await X().loadSettings(),await N().initialize(),e.directive("permission",Vo),e.directive("role",Uo),xe($),e.use($),e.mount("#app")}catch(o){console.error("Failed to initialize app:",o),e.use($),e.mount("#app")}};xo().catch(e=>{console.error("Failed to bootstrap app:",e);const t=Ie(Ue);t.use(we()),t.use(be),t.use($),t.mount("#app")});export{ge as L,O as T,B as U,le as _,Qt as a,Yo as b,Ko as c,Wo as d,no as g,L as i,I as l,ie as p,R as s,N as u,Vo as v};
