import{h as oe,r as C,a as Y,w as J,i as q,l as _e,p as V,N as G,aV as fe,b7 as de,t as l,y as h,aM as Ve,b8 as Ae,k as M,ax as se,aD as Q,aE as X,L as D,j as p,ay as re,aq as me,x as s,at as Ue,aw as Se,aP as ve,b9 as ke,aN as De,aQ as Le,H as _,E as L,o as Be,q as P,aA as Ne,ba as Te,ad as ce,A as Ie,au as Pe,aG as qe,aF as Re,aI as Ee,aH as $e,P as Me}from"./vendor-BxNawP4f.js";import{P as ee}from"./AddressSelector.vue_vue_type_style_index_0_lang-DCS-l7wX.js";import{_ as Fe,g as ge}from"./index-DyxCg8e9.js";/* empty css                                                                      */import{g as Oe,a as ze,c as Ge,s as He}from"./index-N1Xkh6eW.js";import{u as We}from"./index-C4Uq_sZu.js";/* empty css                                                                        */const Je={key:3,class:"unit-display"},Ze=oe({__name:"UnitInput",props:{modelValue:{default:""},unit:{},prop:{},label:{},rules:{},required:{type:Boolean},error:{},showMessage:{type:Boolean,default:!0},inlineMessage:{type:Boolean,default:!1},size:{default:"default"},type:{default:"number"},placeholder:{},disabled:{type:Boolean},readonly:{type:Boolean},clearable:{type:Boolean,default:!1},maxlength:{},minlength:{},showWordLimit:{type:Boolean,default:!1},validateEvent:{type:Boolean,default:!0},units:{default:()=>[]},defaultUnit:{},inputProps:{default:()=>({})},showUnitSelect:{type:Boolean,default:!1},controls:{type:Boolean,default:!0},name:{}},emits:["update:modelValue","update:unit","unit-change","blur","focus","change","input","clear"],setup(F,{expose:y,emit:o}){var b;const m=F,v=o,a=C(),B=C(""),T=C(void 0),A=C(m.unit||m.defaultUnit||((b=m.units[0])==null?void 0:b.value)||"");typeof m.modelValue=="number"?T.value=m.modelValue:typeof m.modelValue=="string"&&(B.value=m.modelValue),Y(()=>{if(!m.rules)return;const e=Array.isArray(m.rules)?m.rules:[m.rules];return m.required&&e.unshift({required:!0,message:`请输入${m.label||""}`}),e}),J(()=>m.modelValue,e=>{typeof e=="number"?T.value=e:typeof e=="string"&&(B.value=e)}),J(()=>m.unit,e=>{e&&(A.value=e)}),J(B,e=>{v("update:modelValue",e)}),J(T,e=>{e!==void 0&&v("update:modelValue",e)}),J(A,e=>{v("update:unit",e)});const R=e=>{v("blur",e)},k=e=>{v("focus",e)},S=e=>{v("change",{value:e,unit:A.value,target:m.name?{name:m.name}:void 0})},N=e=>{e!==void 0&&v("change",{value:e,unit:A.value,target:m.name?{name:m.name}:void 0})},O=e=>{v("input",e)},i=()=>{v("clear")},u=e=>{A.value=e,v("unit-change",e),v("update:unit",e);const f=m.type==="number"?T.value:B.value;f!==void 0&&v("change",{value:f,unit:e,target:m.name?{name:m.name}:void 0})};return y({focus:()=>{var e;return(e=a.value)==null?void 0:e.focus()},blur:()=>{var e;return(e=a.value)==null?void 0:e.blur()},select:()=>{var e;return(e=a.value)==null?void 0:e.select()}}),(e,f)=>{const I=fe,z=Ve,H=re,Z=se;return p(),q("div",{class:_e(["unit-input",{"show-unit-select":e.showUnitSelect}])},[e.type==="number"?(p(),V(I,de({key:0,ref_key:"inputRef",ref:a,modelValue:T.value,"onUpdate:modelValue":f[0]||(f[0]=U=>T.value=U)},e.inputProps,{placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,controls:!1,class:"custom-controls",onBlur:R,onFocus:k,onChange:N}),{decrease:l(()=>f[3]||(f[3]=[h("div",{class:"number-button decrease"},"-",-1)])),increase:l(()=>f[4]||(f[4]=[h("div",{class:"number-button increase"},"+",-1)])),_:1},16,["modelValue","placeholder","disabled","readonly"])):(p(),V(z,de({key:1,ref_key:"inputRef",ref:a,modelValue:B.value,"onUpdate:modelValue":f[1]||(f[1]=U=>B.value=U)},e.inputProps,{type:e.type,placeholder:e.placeholder,disabled:e.disabled,readonly:e.readonly,clearable:e.clearable,maxlength:e.maxlength,minlength:e.minlength,"show-word-limit":e.showWordLimit,"validate-event":e.validateEvent,onBlur:R,onFocus:k,onChange:S,onInput:O,onClear:i}),Ae({_:2},[e.$slots.prefix?{name:"prefix",fn:l(()=>[M(e.$slots,"prefix",{},void 0,!0)]),key:"0"}:void 0,e.$slots.suffix?{name:"suffix",fn:l(()=>[M(e.$slots,"suffix",{},void 0,!0)]),key:"1"}:void 0,e.$slots.prepend?{name:"prepend",fn:l(()=>[M(e.$slots,"prepend",{},void 0,!0)]),key:"2"}:void 0]),1040,["modelValue","type","placeholder","disabled","readonly","clearable","maxlength","minlength","show-word-limit","validate-event"])),e.showUnitSelect&&e.units.length?(p(),V(Z,{key:2,modelValue:A.value,"onUpdate:modelValue":f[2]||(f[2]=U=>A.value=U),disabled:e.disabled,size:e.size,class:"unit-select",onChange:u},{default:l(()=>[(p(!0),q(Q,null,X(e.units,U=>(p(),V(H,{key:U.value,label:U.label,value:U.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","disabled","size"])):e.units.length?(p(),q("div",Je,D(A.value),1)):G("",!0)],2)}}}),x=Fe(Ze,[["__scopeId","data-v-5de805e5"]]),Ke={class:"form-section"},je={class:"form-section"},Ye={key:0,class:"form-section"},Qe=oe({__name:"CalculatorForm",props:{labelPosition:{default:"right"},labelWidth:{default:100},fromLabel:{default:"发件地址"},toLabel:{default:"收件地址"},fromPlaceholder:{default:"请输入发件地邮编"},toPlaceholder:{default:"请输入收件地邮编"},showDimensions:{type:Boolean,default:!0},showInsurance:{type:Boolean,default:!0},showDangerous:{type:Boolean,default:!0},showNote:{type:Boolean,default:!0},showServices:{type:Boolean,default:!0},productTypes:{default:()=>[]},serviceLevels:{default:()=>[]}},emits:["submit","reset","from-address-change","to-address-change","weight-change","dimension-change"],setup(F,{expose:y,emit:o}){const m=o,v=C(),a=me({fromAddress:"",toAddress:"",weight:0,volume:0,quantity:1,productType:"",serviceLevel:"",insuranceValue:0,isDangerous:!1,note:"",weightUnit:"KG",dimensionUnit:"CM",length:0,width:0,height:0}),B=me({fromAddress:[{required:!0,message:"请输入发件地址",trigger:"blur"},{min:5,message:"邮编至少5个字符",trigger:"blur"}],toAddress:[{required:!0,message:"请输入收件地址",trigger:"blur"},{min:5,message:"邮编至少5个字符",trigger:"blur"}],weight:[{required:!0,message:"请输入重量",trigger:"blur"},{type:"number",min:.1,message:"重量必须大于0.1",trigger:"blur"}],quantity:[{required:!0,message:"请输入数量",trigger:"blur"},{type:"number",min:1,message:"数量必须大于0",trigger:"blur"}],productType:[{required:!0,message:"请选择产品类型",trigger:"change"}],serviceLevel:[{required:!0,message:"请选择服务等级",trigger:"change"}]});J([()=>a.length,()=>a.width,()=>a.height],()=>{a.length&&a.width&&a.height&&(a.volume=a.length*a.width*a.height/1e6)});const A=i=>{a.fromAddress=i.postal_code,m("from-address-change",i.postal_code)},R=i=>{a.toAddress=i.postal_code,m("to-address-change",i.postal_code)},k=i=>{a.weight=Number(i.value),a.weightUnit=i.unit,m("weight-change",{weight:Number(i.value),unit:i.unit})},S=i=>{var e,f,I;const u=Number(i.value),{unit:b}=i;((e=i.target)==null?void 0:e.name)==="length"?a.length=u:((f=i.target)==null?void 0:f.name)==="width"?a.width=u:((I=i.target)==null?void 0:I.name)==="height"&&(a.height=u),a.dimensionUnit=b,a.length&&a.width&&a.height&&m("dimension-change",{length:a.length,width:a.width,height:a.height,unit:a.dimensionUnit})},N=async()=>{if(v.value)try{await v.value.validate();const i={fromAddress:a.fromAddress,toAddress:a.toAddress,weight:a.weight,volume:a.volume,quantity:a.quantity,productType:a.productType,serviceLevel:a.serviceLevel,insuranceValue:a.insuranceValue,isDangerous:a.isDangerous,note:a.note};m("submit",i)}catch{L.error("请检查表单填写是否正确")}};return y({resetForm:()=>{v.value&&(v.value.resetFields(),m("reset"))},validate:async()=>v.value?v.value.validate():!1}),(i,u)=>{const b=ve,e=Se,f=Ue,I=fe,z=re,H=se,Z=Le,U=De;return p(),V(U,{ref_key:"formRef",ref:v,model:a,rules:B,"label-position":i.labelPosition,"label-width":i.labelWidth,class:"calculator-form",onSubmit:ke(N,["prevent"])},{default:l(()=>[h("div",Ke,[u[14]||(u[14]=h("div",{class:"form-section-title"},"基本信息",-1)),s(f,{gutter:24},{default:l(()=>[s(e,{span:12},{default:l(()=>[s(b,{label:i.fromLabel,prop:"fromAddress"},{default:l(()=>[M(i.$slots,"from-address",{},()=>[s(ee,{modelValue:a.fromAddress,"onUpdate:modelValue":u[0]||(u[0]=d=>a.fromAddress=d),placeholder:i.fromPlaceholder,onResult:A},null,8,["modelValue","placeholder"])])]),_:3},8,["label"])]),_:3}),s(e,{span:12},{default:l(()=>[s(b,{label:i.toLabel,prop:"toAddress"},{default:l(()=>[M(i.$slots,"to-address",{},()=>[s(ee,{modelValue:a.toAddress,"onUpdate:modelValue":u[1]||(u[1]=d=>a.toAddress=d),placeholder:i.toPlaceholder,onResult:R},null,8,["modelValue","placeholder"])])]),_:3},8,["label"])]),_:3})]),_:3})]),h("div",je,[u[15]||(u[15]=h("div",{class:"form-section-title"},"包裹信息",-1)),s(f,{gutter:16},{default:l(()=>[s(e,{span:12},{default:l(()=>[s(b,{label:"重量",prop:"weight",class:"compact-form-item"},{default:l(()=>[s(x,{modelValue:a.weight,"onUpdate:modelValue":u[2]||(u[2]=d=>a.weight=d),unit:a.weightUnit,"onUpdate:unit":u[3]||(u[3]=d=>a.weightUnit=d),name:"weight",min:.1,max:1e3,step:.1,precision:2,"show-unit-select":!0,units:[{label:"KG",value:"KG"},{label:"LB",value:"LB"},{label:"OZ",value:"OZ"}],onChange:k},null,8,["modelValue","unit"]),M(i.$slots,"weight-info")]),_:3})]),_:3}),s(e,{span:12},{default:l(()=>[s(b,{label:"长度",prop:"length",class:"compact-form-item"},{default:l(()=>[s(x,{modelValue:a.length,"onUpdate:modelValue":u[4]||(u[4]=d=>a.length=d),unit:a.dimensionUnit,"onUpdate:unit":u[5]||(u[5]=d=>a.dimensionUnit=d),name:"length",min:1,precision:1,"show-unit-select":!0,units:[{label:"CM",value:"CM"},{label:"IN",value:"IN"}],onChange:S},null,8,["modelValue","unit"])]),_:1})]),_:1})]),_:3}),s(f,{gutter:16},{default:l(()=>[s(e,{span:12},{default:l(()=>[s(b,{label:"宽度",prop:"width",class:"compact-form-item"},{default:l(()=>[s(x,{modelValue:a.width,"onUpdate:modelValue":u[6]||(u[6]=d=>a.width=d),unit:a.dimensionUnit,"onUpdate:unit":u[7]||(u[7]=d=>a.dimensionUnit=d),name:"width",min:1,precision:1,"show-unit-select":!0,units:[{label:"CM",value:"CM"},{label:"IN",value:"IN"}],onChange:S},null,8,["modelValue","unit"])]),_:1})]),_:1}),s(e,{span:12},{default:l(()=>[s(b,{label:"高度",prop:"height",class:"compact-form-item"},{default:l(()=>[s(x,{modelValue:a.height,"onUpdate:modelValue":u[8]||(u[8]=d=>a.height=d),unit:a.dimensionUnit,"onUpdate:unit":u[9]||(u[9]=d=>a.dimensionUnit=d),name:"height",min:1,precision:1,"show-unit-select":!0,units:[{label:"CM",value:"CM"},{label:"IN",value:"IN"}],onChange:S},null,8,["modelValue","unit"])]),_:1})]),_:1})]),_:1}),i.showInsurance?(p(),V(f,{key:0,gutter:24},{default:l(()=>[s(e,{span:12},{default:l(()=>[s(b,{label:"保险价值",prop:"insuranceValue",class:"compact-form-item"},{default:l(()=>[s(I,{modelValue:a.insuranceValue,"onUpdate:modelValue":u[10]||(u[10]=d=>a.insuranceValue=d),min:0,precision:2,step:100,style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})):G("",!0)]),i.showServices?(p(),q("div",Ye,[u[17]||(u[17]=h("div",{class:"form-section-title"},"服务选项",-1)),M(i.$slots,"service-options",{},()=>[s(f,{gutter:24},{default:l(()=>[s(e,{span:12},{default:l(()=>[s(b,{label:"产品类型",prop:"productType",class:"compact-form-item"},{default:l(()=>[s(H,{modelValue:a.productType,"onUpdate:modelValue":u[11]||(u[11]=d=>a.productType=d),placeholder:"请选择产品类型"},{default:l(()=>[(p(!0),q(Q,null,X(i.productTypes,d=>(p(),V(z,{key:d,label:d,value:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(e,{span:12},{default:l(()=>[s(b,{label:"服务等级",prop:"serviceLevel",class:"compact-form-item"},{default:l(()=>[s(H,{modelValue:a.serviceLevel,"onUpdate:modelValue":u[12]||(u[12]=d=>a.serviceLevel=d),placeholder:"请选择服务等级"},{default:l(()=>[(p(!0),q(Q,null,X(i.serviceLevels,d=>(p(),V(z,{key:d,label:d,value:d},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),s(b,null,{default:l(()=>[s(Z,{modelValue:a.isDangerous,"onUpdate:modelValue":u[13]||(u[13]=d=>a.isDangerous=d)},{default:l(()=>u[16]||(u[16]=[_("是否为危险品")])),_:1},8,["modelValue"])]),_:1})])])):G("",!0),M(i.$slots,"form-footer")]),_:3},8,["model","rules","label-position","label-width"])}}}),Xe=async F=>{try{const{data:y}=await ge("/api/v1/postcodes/postal-codes/",{params:F});return y}catch{return console.warn("Postal codes API not available, using mock data"),{items:[{id:"1",code:"100101",area_name:"东城区",country:{id:"CN",name:"中国",code:"CN",status:!0},province:{id:"BJ",name:"北京",code:"BJ",country:"CN",status:!0},city:{id:"BJ01",name:"北京",code:"BJ01",province:"BJ",status:!0},status:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"2",code:"200120",area_name:"浦东新区",country:{id:"CN",name:"中国",code:"CN",status:!0},province:{id:"SH",name:"上海",code:"SH",country:"CN",status:!0},city:{id:"SH01",name:"上海",code:"SH01",province:"SH",status:!0},status:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{id:"3",code:"510000",area_name:"天河区",country:{id:"CN",name:"中国",code:"CN",status:!0},province:{id:"GD",name:"广东",code:"GD",country:"CN",status:!0},city:{id:"GZ",name:"广州",code:"GZ",province:"GD",status:!0},status:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}],total:3,page:1,page_size:10}}},pe=async F=>{const{data:y}=await ge(`/api/v1/postcodes/address/${F}/`);return y},xe={class:"calculator-container"},et={class:"card-header"},tt={class:"header-actions"},lt={class:"product-selection-container"},at={class:"card-header"},ot={class:"total-charge"},st={class:"card-header"},rt={class:"total-charge"},ft=oe({__name:"single",setup(F){const y=We(),o=C(),m=C(!1),v=C([]),a=C([]),B=C([]),T=C([]),A=C(null),R=C(null),k=C("single"),S=C([]),N=C([]),O=C([]),i=C([]),u=Y(()=>{var w;if(!((w=o.value)!=null&&w.form))return 0;const{length:r,width:t,height:c}=o.value.form,g=o.value.form.dimensionUnit==="CM"?5e3:139;return Number((r*t*c/g).toFixed(1))});Y(()=>{var g;if(!((g=o.value)!=null&&g.form))return 0;const{weight:r,weightUnit:t}=o.value.form;let c=r;return t==="LB"?c=r*.453592:t==="OZ"&&(c=r*.0283495),Math.max(c,u.value)});const b=Y({get:()=>{var r,t;return((t=(r=o.value)==null?void 0:r.form)==null?void 0:t.productType)||""},set:r=>{var t;(t=o.value)!=null&&t.form&&(o.value.form.productType=r)}});Y({get:()=>{var r,t;return((t=(r=o.value)==null?void 0:r.form)==null?void 0:t.serviceLevel)||""},set:r=>{var t;(t=o.value)!=null&&t.form&&(o.value.form.serviceLevel=r)}});const e=async()=>{var r;if(o.value){m.value=!0;try{if(await((r=o.value.formRef)==null?void 0:r.validate()),k.value==="single"){const t={fromAddress:o.value.form.fromAddress,toAddress:o.value.form.toAddress,weight:o.value.form.weight,quantity:o.value.form.quantity||1,productType:o.value.form.productType,serviceLevel:o.value.form.serviceLevel};await y.calculate(t)&&(L.success("计算成功"),N.value=[])}else{if(S.value.length===0){L.warning("请至少选择一个产品进行比较"),m.value=!1;return}const t={fromAddress:o.value.form.fromAddress,toAddress:o.value.form.toAddress,weight:o.value.form.weight,volume:u.value,quantity:o.value.form.quantity||1,productType:S.value.join(","),serviceLevel:o.value.form.serviceLevel},c=await Ge(t);N.value=c.data,L.success("产品比较完成")}}catch(t){console.error("计算失败:",t),L.error("计算失败，请检查输入")}finally{m.value=!1}}},f=async()=>{if(!(!y.currentResult||!o.value))try{const r={fromAddress:o.value.form.fromAddress,toAddress:o.value.form.toAddress,weight:o.value.form.weight,quantity:o.value.form.quantity,productType:o.value.form.productType,serviceLevel:o.value.form.serviceLevel,calculationResult:y.currentResult};await He(r),L.success("保存成功")}catch(r){console.error("保存失败:",r),L.error("保存失败")}},I=async r=>{var t,c;if(!r){A.value=null,(t=o==null?void 0:o.value)!=null&&t.form&&(o.value.form.fromAddress="");return}try{const g=await pe(r);A.value=g,(c=o==null?void 0:o.value)!=null&&c.form&&(o.value.form.fromAddress=r)}catch(g){console.error("获取邮编信息失败:",g),A.value={postal_code:r,full_address:"",province:"",city:"",district:""}}},z=async r=>{var t,c;if(!r){R.value=null,(t=o==null?void 0:o.value)!=null&&t.form&&(o.value.form.toAddress="");return}try{const g=await pe(r);R.value=g,(c=o==null?void 0:o.value)!=null&&c.form&&(o.value.form.toAddress=r)}catch(g){console.error("获取邮编信息失败:",g),R.value={postal_code:r,full_address:"",province:"",city:"",district:""}}},H=({weight:r,unit:t})=>{o.value&&(o.value.form.weight=r,o.value.form.weightUnit=t)},Z=({length:r,width:t,height:c,unit:g})=>{o.value&&(o.value.form.length=r,o.value.form.width=t,o.value.form.height=c,o.value.form.dimensionUnit=g)},U=r=>{var t,c;r==="compare"?(c=(t=o.value)==null?void 0:t.form)!=null&&c.productType&&S.value.length===0&&(S.value=[o.value.form.productType]):N.value=[]},d=async()=>{if(N.value.length!==0)try{L.success("比较结果已保存")}catch(r){console.error("保存失败:",r),L.error("保存失败")}},he=r=>{o.value&&(o.value.form.productType=r.productType,o.value.form.serviceLevel=r.serviceLevel),y.currentResult={requestId:"",baseCharge:r.baseCharge,fuelSurcharge:r.fuelSurcharge,insuranceFee:r.insuranceFee||0,totalCharge:r.totalCharge,currency:"CNY",estimatedDays:r.estimatedDays,details:{weightCharge:0,distanceCharge:0,zoneCharge:0,additionalCharges:[]}},k.value="single",L.success(`已选择 ${r.productType} 产品`)};Be(async()=>{try{const[r,t,c]=await Promise.all([Oe(),ze(),Xe({page:1,page_size:100}).catch(w=>(console.warn("获取邮编数据失败:",w),{results:[]}))]);O.value=Array.isArray(r)?r.map(w=>({code:w.code||w.id,name:w.name})):[],v.value=O.value.map(w=>w.name),i.value=Array.isArray(t)?t.map(w=>({code:w.code||w.id,name:w.name})):[],a.value=i.value.map(w=>w.name);const g=c;B.value=g.results||[],T.value=g.results||[]}catch(r){console.error("初始化失败:",r),L.error("初始化失败")}});const ne=Me(),ye=()=>{ne.push("/calculator/history")},be=()=>{ne.push("/calculator/compare")},E=r=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(r);return(r,t)=>{const c=Ie,g=Te,w=Ne,te=ve,ue=re,ie=se,le=Pe,K=qe,we=Re,$=Ee,Ce=$e;return p(),q("div",xe,[s(le,{class:"calculator-card"},{header:l(()=>[h("div",et,[t[8]||(t[8]=h("h2",null,"运费计算",-1)),h("div",tt,[s(c,{type:"info",onClick:ye,icon:"Clock"},{default:l(()=>t[5]||(t[5]=[_(" 计算历史 ")])),_:1}),s(c,{type:"warning",onClick:be,icon:"Sort"},{default:l(()=>t[6]||(t[6]=[_(" 产品比较 ")])),_:1}),s(c,{type:"primary",onClick:e,loading:m.value},{default:l(()=>t[7]||(t[7]=[_(" 计算运费 ")])),_:1},8,["loading"])])])]),default:l(()=>[s(P(Qe),{ref_key:"calculatorFormRef",ref:o,"label-position":"right","label-width":"100px","from-label":"起始地邮编","to-label":"目的地邮编","from-placeholder":"请输入或搜索起始地邮编","to-placeholder":"请输入或搜索目的地邮编","product-types":[],"service-levels":[],"show-insurance":!1,"show-dimensions":!0,"show-dangerous":!1,"show-services":!1,onFromAddressChange:I,onToAddressChange:z,onWeightChange:H,onDimensionChange:Z},{"form-header":l(()=>t[9]||(t[9]=[h("h3",{class:"section-title"},"基本信息",-1)])),"from-address":l(()=>{var n,W;return[(p(),V(ce(P(ee)),{"model-value":((W=(n=o.value)==null?void 0:n.form)==null?void 0:W.fromAddress)||"","onUpdate:modelValue":t[0]||(t[0]=ae=>{var j;(j=o.value)!=null&&j.form&&(o.value.form.fromAddress=ae)}),placeholder:"请输入或搜索起始地邮编",onResult:I},null,40,["model-value"]))]}),"to-address":l(()=>{var n,W;return[(p(),V(ce(P(ee)),{"model-value":((W=(n=o.value)==null?void 0:n.form)==null?void 0:W.toAddress)||"","onUpdate:modelValue":t[1]||(t[1]=ae=>{var j;(j=o.value)!=null&&j.form&&(o.value.form.toAddress=ae)}),placeholder:"请输入或搜索目的地邮编",onResult:z},null,40,["model-value"]))]}),"package-header":l(()=>t[10]||(t[10]=[h("h3",{class:"section-title"},"包裹信息",-1)])),"weight-info":l(()=>t[11]||(t[11]=[])),"form-footer":l(()=>[t[14]||(t[14]=h("h3",{class:"section-title"},"产品选择",-1)),h("div",lt,[s(te,{class:"selection-mode"},{default:l(()=>[s(w,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=n=>k.value=n),onChange:U},{default:l(()=>[s(g,{value:"single"},{default:l(()=>t[12]||(t[12]=[_("选择单个产品")])),_:1}),s(g,{value:"compare"},{default:l(()=>t[13]||(t[13]=[_("选择多个产品比较")])),_:1})]),_:1},8,["modelValue"])]),_:1}),k.value==="single"?(p(),V(te,{key:0,label:"选择产品",class:"product-select"},{default:l(()=>[s(ie,{modelValue:b.value,"onUpdate:modelValue":t[3]||(t[3]=n=>b.value=n),placeholder:"请选择产品",style:{width:"100%"}},{default:l(()=>[(p(!0),q(Q,null,X(O.value,n=>(p(),V(ue,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):G("",!0),k.value==="compare"?(p(),V(te,{key:1,label:"比较产品",class:"product-select"},{default:l(()=>[s(ie,{modelValue:S.value,"onUpdate:modelValue":t[4]||(t[4]=n=>S.value=n),multiple:"",placeholder:"请选择要比较的产品",style:{width:"100%"}},{default:l(()=>[(p(!0),q(Q,null,X(O.value,n=>(p(),V(ue,{key:n.code,label:n.name,value:n.code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})):G("",!0)])]),_:1},512)]),_:1}),P(y).currentResult?(p(),V(le,{key:0,class:"result-card"},{header:l(()=>[h("div",at,[t[16]||(t[16]=h("h2",null,"计算结果",-1)),s(c,{type:"primary",onClick:f},{default:l(()=>t[15]||(t[15]=[_("保存结果")])),_:1})])]),default:l(()=>[s(we,{column:2,border:"",class:"result-descriptions"},{default:l(()=>[s(K,{label:"基础运费"},{default:l(()=>{var n;return[_(D(E(((n=P(y).currentResult)==null?void 0:n.baseCharge)||0)),1)]}),_:1}),s(K,{label:"燃油附加费"},{default:l(()=>{var n;return[_(D(E(((n=P(y).currentResult)==null?void 0:n.fuelSurcharge)||0)),1)]}),_:1}),s(K,{label:"保险费"},{default:l(()=>{var n;return[_(D(E(((n=P(y).currentResult)==null?void 0:n.insuranceFee)||0)),1)]}),_:1}),s(K,{label:"总费用"},{default:l(()=>{var n;return[h("span",ot,D(E(((n=P(y).currentResult)==null?void 0:n.totalCharge)||0)),1)]}),_:1}),s(K,{label:"预计送达时间",span:2},{default:l(()=>{var n;return[_(D(((n=P(y).currentResult)==null?void 0:n.estimatedDays)||0)+" 天 ",1)]}),_:1})]),_:1})]),_:1})):G("",!0),N.value.length>0?(p(),V(le,{key:1,class:"compare-result-card"},{header:l(()=>[h("div",st,[t[18]||(t[18]=h("h2",null,"产品比较结果",-1)),s(c,{type:"primary",onClick:d},{default:l(()=>t[17]||(t[17]=[_("保存比较结果")])),_:1})])]),default:l(()=>[s(Ce,{data:N.value,border:"",stripe:"",class:"compare-table"},{default:l(()=>[s($,{prop:"productType",label:"产品名称","min-width":"120"}),s($,{prop:"serviceLevel",label:"服务等级","min-width":"120"}),s($,{prop:"baseCharge",label:"基础运费","min-width":"100"},{default:l(({row:n})=>[_(D(E(n.baseCharge)),1)]),_:1}),s($,{prop:"fuelSurcharge",label:"燃油附加费","min-width":"120"},{default:l(({row:n})=>[_(D(E(n.fuelSurcharge)),1)]),_:1}),s($,{prop:"insuranceFee",label:"保险费","min-width":"100"},{default:l(({row:n})=>[_(D(E(n.insuranceFee)),1)]),_:1}),s($,{prop:"totalCharge",label:"总费用","min-width":"100"},{default:l(({row:n})=>[h("span",rt,D(E(n.totalCharge)),1)]),_:1}),s($,{prop:"estimatedDays",label:"预计送达时间","min-width":"120"},{default:l(({row:n})=>[_(D(n.estimatedDays)+" 天 ",1)]),_:1}),s($,{label:"操作",fixed:"right",width:"100"},{default:l(({row:n})=>[s(c,{type:"primary",size:"small",onClick:W=>he(n)},{default:l(()=>t[19]||(t[19]=[_("选择")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1})):G("",!0)])}}});export{ft as default};
