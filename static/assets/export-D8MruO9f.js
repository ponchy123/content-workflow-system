import{h as U,r as w,aq as Y,i as B,x as e,t as a,y as n,b3 as C,b4 as R,aN as z,aP as H,bm as P,ax as S,ay as $,aA as I,ba as L,H as u,A as q,aH as A,aI as j,aJ as G,L as J,p as T,N as k,au as O,E as _,j as V}from"./vendor-BxNawP4f.js";import{_ as Q}from"./index-DyxCg8e9.js";const K={class:"data-export"},W={class:"export-container"},X={class:"export-form"},Z={class:"export-form"},h={class:"export-form"},ee={class:"export-history"},le=U({__name:"export",setup(ae){const g=w("calculator"),o=Y({dateRange:"",calcType:"",fileFormat:"xlsx",period:"monthly",providers:[],logType:"",user:""}),c=w([{date:"2024-03-10 10:15:23",type:"计算记录",fileName:"计算记录_20240301-20240310.xlsx",size:"1.2MB",status:"completed"},{date:"2024-03-08 15:32:10",type:"费用报表",fileName:"费用月报_202402.pdf",size:"3.5MB",status:"completed"},{date:"2024-03-07 09:05:47",type:"系统日志",fileName:"系统日志_20240301-20240307.csv",size:"0.8MB",status:"completed"},{date:"2024-03-05 14:22:36",type:"费用报表",fileName:"费用季报_2023Q4.xlsx",size:"5.3MB",status:"completed"},{date:"2024-03-01 11:45:19",type:"计算记录",fileName:"计算记录_20240201-20240229.xlsx",size:"2.1MB",status:"completed"}]),b=p=>{if(!o.dateRange){_.warning("请选择时间范围");return}p==="calculator"?_.success("计算记录导出任务已提交，请稍后查看导出历史"):p==="cost"?_.success("费用报表导出任务已提交，请稍后查看导出历史"):p==="logs"&&_.success("系统日志导出任务已提交，请稍后查看导出历史"),c.value.unshift({date:new Date().toLocaleString(),type:p==="calculator"?"计算记录":p==="cost"?"费用报表":"系统日志",fileName:`导出任务_${new Date().getTime()}.${o.fileFormat}`,size:"处理中",status:"processing"})};return(p,l)=>{const v=P,s=H,d=$,i=S,r=L,E=I,f=q,x=z,y=R,D=C,m=j,N=G,F=A,M=O;return V(),B("div",K,[e(M,null,{header:a(()=>l[14]||(l[14]=[n("div",{class:"card-header"},[n("h2",null,"数据导出")],-1)])),default:a(()=>[n("div",W,[e(D,{modelValue:g.value,"onUpdate:modelValue":l[13]||(l[13]=t=>g.value=t)},{default:a(()=>[e(y,{label:"计算记录",name:"calculator"},{default:a(()=>[n("div",X,[e(x,{model:o,"label-width":"100px"},{default:a(()=>[e(s,{label:"时间范围"},{default:a(()=>[e(v,{modelValue:o.dateRange,"onUpdate:modelValue":l[0]||(l[0]=t=>o.dateRange=t),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"350px"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(s,{label:"计算类型"},{default:a(()=>[e(i,{modelValue:o.calcType,"onUpdate:modelValue":l[1]||(l[1]=t=>o.calcType=t),placeholder:"请选择计算类型",style:{width:"350px"}},{default:a(()=>[e(d,{label:"全部",value:""}),e(d,{label:"单次计算",value:"single"}),e(d,{label:"批量计算",value:"batch"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"文件格式"},{default:a(()=>[e(E,{modelValue:o.fileFormat,"onUpdate:modelValue":l[2]||(l[2]=t=>o.fileFormat=t)},{default:a(()=>[e(r,{value:"xlsx"},{default:a(()=>l[15]||(l[15]=[u("Excel (.xlsx)")])),_:1}),e(r,{value:"csv"},{default:a(()=>l[16]||(l[16]=[u("CSV (.csv)")])),_:1}),e(r,{value:"pdf"},{default:a(()=>l[17]||(l[17]=[u("PDF (.pdf)")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(f,{type:"primary",onClick:l[3]||(l[3]=t=>b("calculator"))},{default:a(()=>l[18]||(l[18]=[u("导出数据")])),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),e(y,{label:"费用报表",name:"cost"},{default:a(()=>[n("div",Z,[e(x,{model:o,"label-width":"100px"},{default:a(()=>[e(s,{label:"报表周期"},{default:a(()=>[e(i,{modelValue:o.period,"onUpdate:modelValue":l[4]||(l[4]=t=>o.period=t),placeholder:"请选择报表周期",style:{width:"350px"}},{default:a(()=>[e(d,{label:"日报",value:"daily"}),e(d,{label:"周报",value:"weekly"}),e(d,{label:"月报",value:"monthly"}),e(d,{label:"季报",value:"quarterly"}),e(d,{label:"年报",value:"yearly"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"时间范围"},{default:a(()=>[e(v,{modelValue:o.dateRange,"onUpdate:modelValue":l[5]||(l[5]=t=>o.dateRange=t),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",style:{width:"350px"},"value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),e(s,{label:"服务商"},{default:a(()=>[e(i,{modelValue:o.providers,"onUpdate:modelValue":l[6]||(l[6]=t=>o.providers=t),multiple:"",placeholder:"请选择服务商",style:{width:"350px"}},{default:a(()=>[e(d,{label:"FedEx",value:"fedex"}),e(d,{label:"UPS",value:"ups"}),e(d,{label:"DHL",value:"dhl"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"文件格式"},{default:a(()=>[e(E,{modelValue:o.fileFormat,"onUpdate:modelValue":l[7]||(l[7]=t=>o.fileFormat=t)},{default:a(()=>[e(r,{value:"xlsx"},{default:a(()=>l[19]||(l[19]=[u("Excel (.xlsx)")])),_:1}),e(r,{value:"csv"},{default:a(()=>l[20]||(l[20]=[u("CSV (.csv)")])),_:1}),e(r,{value:"pdf"},{default:a(()=>l[21]||(l[21]=[u("PDF (.pdf)")])),_:1})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(f,{type:"primary",onClick:l[8]||(l[8]=t=>b("cost"))},{default:a(()=>l[22]||(l[22]=[u("导出数据")])),_:1})]),_:1})]),_:1},8,["model"])])]),_:1}),e(y,{label:"系统日志",name:"logs"},{default:a(()=>[n("div",h,[e(x,{model:o,"label-width":"100px"},{default:a(()=>[e(s,{label:"日志类型"},{default:a(()=>[e(i,{modelValue:o.logType,"onUpdate:modelValue":l[9]||(l[9]=t=>o.logType=t),placeholder:"请选择日志类型",style:{width:"350px"}},{default:a(()=>[e(d,{label:"全部日志",value:""}),e(d,{label:"操作日志",value:"operation"}),e(d,{label:"系统日志",value:"system"}),e(d,{label:"错误日志",value:"error"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"时间范围"},{default:a(()=>[e(v,{modelValue:o.dateRange,"onUpdate:modelValue":l[10]||(l[10]=t=>o.dateRange=t),type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间",style:{width:"350px"},"value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1}),e(s,{label:"用户"},{default:a(()=>[e(i,{modelValue:o.user,"onUpdate:modelValue":l[11]||(l[11]=t=>o.user=t),placeholder:"请选择用户",style:{width:"350px"}},{default:a(()=>[e(d,{label:"全部用户",value:""}),e(d,{label:"管理员",value:"admin"}),e(d,{label:"操作员",value:"operator"})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:a(()=>[e(f,{type:"primary",onClick:l[12]||(l[12]=t=>b("logs"))},{default:a(()=>l[23]||(l[23]=[u("导出数据")])),_:1})]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1},8,["modelValue"]),n("div",ee,[l[26]||(l[26]=n("h3",null,"导出历史",-1)),e(F,{data:c.value,border:"",style:{width:"100%"}},{default:a(()=>[e(m,{prop:"date",label:"导出时间",width:"180"}),e(m,{prop:"type",label:"导出类型",width:"120"}),e(m,{prop:"fileName",label:"文件名称"}),e(m,{prop:"size",label:"文件大小",width:"100"}),e(m,{prop:"status",label:"状态",width:"100"},{default:a(({row:t})=>[e(N,{type:t.status==="completed"?"success":t.status==="failed"?"danger":"warning"},{default:a(()=>[u(J(t.status==="completed"?"完成":t.status==="failed"?"失败":"进行中"),1)]),_:2},1032,["type"])]),_:1}),e(m,{label:"操作",width:"150"},{default:a(({row:t})=>[t.status==="completed"?(V(),T(f,{key:0,type:"primary",link:""},{default:a(()=>l[24]||(l[24]=[u("下载")])),_:1})):k("",!0),t.status==="completed"?(V(),T(f,{key:1,type:"danger",link:""},{default:a(()=>l[25]||(l[25]=[u("删除")])),_:1})):k("",!0)]),_:1})]),_:1},8,["data"])])])]),_:1})])}}}),de=Q(le,[["__scopeId","data-v-cfa7a764"]]);export{de as default};
