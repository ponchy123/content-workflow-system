# Generated by Django 3.2.25 on 2025-03-19 14:52

from django.db import migrations, models
import django.utils.timezone
import simple_history.models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
    ]

    operations = [
        migrations.CreateModel(
            name='AccessLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('created_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='创建人')),
                ('updated_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='更新人')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='是否删除')),
                ('url', models.CharField(max_length=255, verbose_name='访问URL')),
                ('method', models.CharField(max_length=10, verbose_name='请求方法')),
                ('ip_address', models.CharField(default='0.0.0.0', max_length=50, verbose_name='IP地址')),
                ('user_agent', models.CharField(default='Unknown', max_length=255, verbose_name='用户代理')),
                ('status_code', models.IntegerField(verbose_name='状态码')),
                ('response_time', models.FloatField(verbose_name='响应时间(ms)')),
                ('object_id', models.PositiveIntegerField(blank=True, null=True)),
                ('cache_hit', models.BooleanField(default=False, verbose_name='缓存命中')),
                ('remarks', models.TextField(blank=True, null=True, verbose_name='备注')),
                ('module', models.CharField(blank=True, max_length=50, null=True, verbose_name='模块')),
            ],
            options={
                'verbose_name': '访问日志',
                'verbose_name_plural': '访问日志',
                'db_table': 'access_logs',
            },
        ),
        migrations.CreateModel(
            name='ApiRequestLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('created_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='创建人')),
                ('updated_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='更新人')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='是否删除')),
                ('request_id', models.CharField(db_index=True, max_length=50, verbose_name='请求ID')),
                ('endpoint', models.CharField(max_length=255, verbose_name='API端点')),
                ('request_time', models.DateTimeField(auto_now_add=True, verbose_name='请求时间')),
                ('method', models.CharField(max_length=10, verbose_name='请求方法')),
                ('params', models.JSONField(blank=True, null=True, verbose_name='请求参数')),
                ('headers', models.JSONField(blank=True, null=True, verbose_name='请求头')),
                ('response', models.JSONField(blank=True, null=True, verbose_name='响应内容')),
                ('status_code', models.IntegerField(verbose_name='状态码')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP地址')),
                ('processing_time', models.FloatField(verbose_name='处理时间(毫秒)')),
            ],
            options={
                'verbose_name': 'API请求日志',
                'verbose_name_plural': 'API请求日志',
                'db_table': 'core_api_request_log',
            },
        ),
        migrations.CreateModel(
            name='AuditLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('action', models.CharField(choices=[('CREATE', '创建'), ('UPDATE', '更新'), ('DELETE', '删除'), ('LOGIN', '登录'), ('LOGOUT', '登出'), ('EXPORT', '导出'), ('IMPORT', '导入'), ('OTHER', '其他')], max_length=50, verbose_name='操作类型')),
                ('content_type', models.CharField(max_length=100, verbose_name='内容类型')),
                ('object_id', models.CharField(max_length=50, verbose_name='对象ID')),
                ('object_repr', models.CharField(max_length=200, verbose_name='对象描述')),
                ('action_time', models.DateTimeField(auto_now_add=True, verbose_name='操作时间')),
                ('ip_addr', models.GenericIPAddressField(verbose_name='IP地址')),
                ('user_agent', models.CharField(max_length=200, verbose_name='用户代理')),
                ('change_message', models.JSONField(verbose_name='变更信息')),
                ('risk_level', models.CharField(choices=[('LOW', '低'), ('MEDIUM', '中'), ('HIGH', '高')], default='LOW', max_length=10, verbose_name='风险等级')),
                ('module', models.CharField(blank=True, max_length=50, null=True, verbose_name='功能模块')),
                ('status', models.CharField(default='SUCCESS', max_length=20, verbose_name='操作状态')),
                ('error_message', models.TextField(blank=True, null=True, verbose_name='错误信息')),
                ('duration', models.FloatField(default=0.0, verbose_name='执行时长(ms)')),
            ],
            options={
                'verbose_name': '审计日志',
                'verbose_name_plural': '审计日志',
                'ordering': ['action_time'],
            },
        ),
        migrations.CreateModel(
            name='HistoricalReport',
            fields=[
                ('id', models.BigIntegerField(auto_created=True, blank=True, db_index=True, verbose_name='ID')),
                ('created_at', models.DateTimeField(blank=True, editable=False, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(blank=True, editable=False, verbose_name='更新时间')),
                ('updated_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='更新人')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='是否删除')),
                ('name', models.CharField(max_length=100, verbose_name='报表名称')),
                ('report_type', models.CharField(choices=[('order', '订单报表'), ('product', '产品报表'), ('finance', '财务报表'), ('operation', '运营报表')], max_length=20, verbose_name='报表类型')),
                ('query_params', models.JSONField(verbose_name='查询参数')),
                ('is_scheduled', models.BooleanField(default=False, verbose_name='是否定时')),
                ('schedule_config', models.JSONField(blank=True, null=True, verbose_name='定时配置')),
                ('history_id', models.AutoField(primary_key=True, serialize=False)),
                ('history_date', models.DateTimeField(db_index=True)),
                ('history_change_reason', models.TextField(null=True)),
                ('history_type', models.CharField(choices=[('+', 'Created'), ('~', 'Changed'), ('-', 'Deleted')], max_length=1)),
            ],
            options={
                'verbose_name': 'historical 报表',
                'verbose_name_plural': 'historical 报表',
                'ordering': ('-history_date', '-history_id'),
                'get_latest_by': ('history_date', 'history_id'),
            },
            bases=(simple_history.models.HistoricalChanges, models.Model),
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.CharField(max_length=32, primary_key=True, serialize=False)),
                ('type', models.CharField(choices=[('system', '系统通知'), ('business', '业务通知'), ('warning', '警告通知'), ('error', '错误通知')], max_length=20)),
                ('title', models.CharField(max_length=200)),
                ('content', models.TextField()),
                ('link', models.URLField(blank=True, null=True)),
                ('read', models.BooleanField(default=False)),
                ('module', models.CharField(blank=True, max_length=50, null=True)),
                ('timestamp', models.DateTimeField(default=django.utils.timezone.now)),
            ],
            options={
                'ordering': ['timestamp'],
            },
        ),
        migrations.CreateModel(
            name='NotificationSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('max_count', models.IntegerField(default=50)),
                ('expiration_days', models.IntegerField(default=7)),
                ('sound_enabled', models.BooleanField(default=True)),
                ('desktop_notification', models.BooleanField(default=False)),
                ('group_by_module', models.BooleanField(default=False)),
                ('auto_cleanup', models.BooleanField(default=True)),
                ('created_at', models.DateTimeField(auto_now_add=True)),
                ('updated_at', models.DateTimeField(auto_now=True)),
            ],
            options={
                'verbose_name': 'notification settings',
                'verbose_name_plural': 'notification settings',
            },
        ),
        migrations.CreateModel(
            name='Report',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('updated_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='更新人')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='是否删除')),
                ('name', models.CharField(max_length=100, verbose_name='报表名称')),
                ('report_type', models.CharField(choices=[('order', '订单报表'), ('product', '产品报表'), ('finance', '财务报表'), ('operation', '运营报表')], max_length=20, verbose_name='报表类型')),
                ('query_params', models.JSONField(verbose_name='查询参数')),
                ('is_scheduled', models.BooleanField(default=False, verbose_name='是否定时')),
                ('schedule_config', models.JSONField(blank=True, null=True, verbose_name='定时配置')),
            ],
            options={
                'verbose_name': '报表',
                'verbose_name_plural': '报表',
                'ordering': ['created_at'],
            },
        ),
        migrations.CreateModel(
            name='RequestLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('created_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='创建人')),
                ('updated_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='更新人')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='是否删除')),
                ('request_id', models.CharField(db_index=True, max_length=50, verbose_name='请求ID')),
                ('url', models.CharField(max_length=255, verbose_name='URL')),
                ('method', models.CharField(max_length=10, verbose_name='请求方法')),
                ('headers', models.JSONField(default=dict, verbose_name='请求头')),
                ('params', models.JSONField(blank=True, default=dict, null=True, verbose_name='请求参数')),
                ('body', models.TextField(blank=True, null=True, verbose_name='请求体')),
                ('ip', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP地址')),
                ('user_agent', models.CharField(blank=True, max_length=255, null=True, verbose_name='User Agent')),
                ('status_code', models.IntegerField(blank=True, null=True, verbose_name='状态码')),
                ('duration', models.FloatField(blank=True, null=True, verbose_name='请求耗时(秒)')),
            ],
            options={
                'verbose_name': '请求日志',
                'verbose_name_plural': '请求日志',
                'db_table': 'core_request_log',
            },
        ),
        migrations.CreateModel(
            name='ResponseLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('created_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='创建人')),
                ('updated_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='更新人')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='是否删除')),
                ('status_code', models.IntegerField(db_index=True, verbose_name='状态码')),
                ('headers', models.JSONField(default=dict, verbose_name='响应头')),
                ('body', models.JSONField(blank=True, null=True, verbose_name='响应体')),
                ('duration', models.FloatField(db_index=True, verbose_name='响应时间(ms)')),
                ('error_message', models.TextField(blank=True, null=True, verbose_name='错误信息')),
                ('cache_hit', models.BooleanField(default=False, verbose_name='缓存命中')),
            ],
            options={
                'verbose_name': '响应日志',
                'verbose_name_plural': '响应日志',
                'db_table': 'core_response_log',
            },
        ),
        migrations.CreateModel(
            name='ServiceProvider',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('created_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='创建人')),
                ('updated_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='更新人')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='是否删除')),
                ('name', models.CharField(max_length=100, verbose_name='服务商名称')),
                ('code', models.CharField(max_length=50, unique=True, verbose_name='服务商代码')),
                ('contact_person', models.CharField(blank=True, max_length=50, null=True, verbose_name='联系人')),
                ('contact_phone', models.CharField(blank=True, max_length=20, null=True, verbose_name='联系电话')),
                ('contact_email', models.EmailField(blank=True, max_length=254, null=True, verbose_name='联系邮箱')),
                ('status', models.BooleanField(default=True, verbose_name='状态')),
                ('api_key', models.CharField(blank=True, max_length=100, null=True, verbose_name='API密钥')),
                ('api_secret', models.CharField(blank=True, max_length=100, null=True, verbose_name='API密钥')),
                ('config', models.JSONField(blank=True, default=dict, verbose_name='配置信息')),
            ],
            options={
                'verbose_name': '服务商',
                'verbose_name_plural': '服务商',
                'db_table': 'core_service_provider',
            },
        ),
        migrations.CreateModel(
            name='SystemConfig',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('created_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='创建人')),
                ('updated_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='更新人')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='是否删除')),
                ('key', models.CharField(max_length=100, unique=True, verbose_name='配置键')),
                ('value', models.JSONField(verbose_name='配置值')),
                ('description', models.TextField(blank=True, null=True, verbose_name='配置说明')),
                ('is_public', models.BooleanField(default=False, verbose_name='是否公开')),
                ('config_type', models.CharField(choices=[('basic', '基础设置'), ('calculation', '计算设置'), ('notification', '通知设置'), ('api', 'API设置')], default='basic', max_length=20, verbose_name='配置类型')),
                ('validation_rules', models.JSONField(blank=True, null=True, verbose_name='验证规则')),
            ],
            options={
                'verbose_name': '系统配置',
                'verbose_name_plural': '系统配置',
                'db_table': 'core_system_config',
            },
        ),
        migrations.CreateModel(
            name='SystemLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='更新时间')),
                ('created_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='创建人')),
                ('updated_by', models.CharField(blank=True, max_length=100, null=True, verbose_name='更新人')),
                ('is_deleted', models.BooleanField(default=False, verbose_name='是否删除')),
                ('level', models.CharField(choices=[('DEBUG', '调试'), ('INFO', '信息'), ('WARNING', '警告'), ('ERROR', '错误'), ('CRITICAL', '严重')], max_length=10, verbose_name='日志级别')),
                ('message', models.TextField(verbose_name='日志消息')),
                ('module', models.CharField(blank=True, max_length=50, null=True, verbose_name='模块')),
                ('trace', models.TextField(blank=True, null=True, verbose_name='堆栈跟踪')),
            ],
            options={
                'verbose_name': '系统日志',
                'verbose_name_plural': '系统日志',
                'db_table': 'core_system_log',
            },
        ),
        migrations.CreateModel(
            name='TemporaryFile',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('file', models.FileField(upload_to='temp_files/', verbose_name='文件')),
                ('access_token', models.CharField(max_length=100, verbose_name='访问令牌')),
                ('file_name', models.CharField(max_length=255, verbose_name='文件名')),
                ('file_type', models.CharField(max_length=50, verbose_name='文件类型')),
                ('file_size', models.IntegerField(verbose_name='文件大小')),
                ('expiry_time', models.DateTimeField(verbose_name='过期时间')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '临时文件',
                'verbose_name_plural': '临时文件',
                'db_table': 'core_temporary_file',
            },
        ),
        migrations.CreateModel(
            name='TokenBlacklist',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('token', models.CharField(max_length=255, verbose_name='Token')),
                ('expiry_time', models.DateTimeField(verbose_name='过期时间')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='创建时间')),
            ],
            options={
                'verbose_name': '令牌黑名单',
                'verbose_name_plural': '令牌黑名单',
                'db_table': 'core_token_blacklist',
            },
        ),
    ]
